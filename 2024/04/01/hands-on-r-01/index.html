<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/fuchencong.github.io/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/fuchencong.github.io/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/fuchencong.github.io/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/fuchencong.github.io/images/logo.svg" color="#222">

<link rel="stylesheet" href="/fuchencong.github.io/css/main.css">


<link rel="stylesheet" href="/fuchencong.github.io/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"fuchencong.github.io","root":"/fuchencong.github.io/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="最近媳妇为了她自己的事业，说要学习 R 语言。权且无论其是否能够坚持，至少初心还是好的。尽管雄心勃勃，但对于一个没有任何编程基础的人来说，要学习一门编程语言还是难度较大。为了降低她的入门难度，同时从实际行动上表达我对她事业的支持，我也和她一起学习 R 语言。 该系列文章是《R 语言入门与实践》一书的学习笔记，尽管这本书比较老了，但是非常基础，比较适合没有编程经验的读者学习 R 语言。">
<meta property="og:type" content="article">
<meta property="og:title" content="R 语言入门与实践（1）：非均匀骰子项目">
<meta property="og:url" content="https://fuchencong.github.io/fuchencong.github.io/2024/04/01/hands-on-r-01/index.html">
<meta property="og:site_name" content="fuchencong">
<meta property="og:description" content="最近媳妇为了她自己的事业，说要学习 R 语言。权且无论其是否能够坚持，至少初心还是好的。尽管雄心勃勃，但对于一个没有任何编程基础的人来说，要学习一门编程语言还是难度较大。为了降低她的入门难度，同时从实际行动上表达我对她事业的支持，我也和她一起学习 R 语言。 该系列文章是《R 语言入门与实践》一书的学习笔记，尽管这本书比较老了，但是非常基础，比较适合没有编程经验的读者学习 R 语言。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://fuchencong.github.io/fuchencong.github.io/2024/04/01/hands-on-r-01/images/Rplot.png">
<meta property="og:image" content="https://fuchencong.github.io/fuchencong.github.io/2024/04/01/hands-on-r-01/images/Rplot01.png">
<meta property="og:image" content="https://fuchencong.github.io/fuchencong.github.io/2024/04/01/hands-on-r-01/images/Rplot02.png">
<meta property="og:image" content="https://fuchencong.github.io/fuchencong.github.io/2024/04/01/hands-on-r-01/images/Rplot03.png">
<meta property="article:published_time" content="2024-04-01T10:31:27.000Z">
<meta property="article:modified_time" content="2024-04-01T10:33:21.069Z">
<meta property="article:author" content="fuchencong">
<meta property="article:tag" content="R">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://fuchencong.github.io/fuchencong.github.io/2024/04/01/hands-on-r-01/images/Rplot.png">

<link rel="canonical" href="https://fuchencong.github.io/fuchencong.github.io/2024/04/01/hands-on-r-01/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>R 语言入门与实践（1）：非均匀骰子项目 | fuchencong</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/fuchencong.github.io/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">fuchencong</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">The way I am</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/fuchencong.github.io/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/fuchencong.github.io/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/fuchencong.github.io/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/fuchencong.github.io/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/fuchencong.github.io/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://fuchencong.github.io/fuchencong.github.io/2024/04/01/hands-on-r-01/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/fuchencong.github.io/images/logo.jpeg">
      <meta itemprop="name" content="fuchencong">
      <meta itemprop="description" content="Having dreams is what makes life tolerable.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="fuchencong">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          R 语言入门与实践（1）：非均匀骰子项目
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-04-01 18:31:27" itemprop="dateCreated datePublished" datetime="2024-04-01T18:31:27+08:00">2024-04-01</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/fuchencong.github.io/categories/R/" itemprop="url" rel="index"><span itemprop="name">R</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>最近媳妇为了她自己的事业，说要学习 R 语言。权且无论其是否能够坚持，至少初心还是好的。尽管雄心勃勃，但对于一个没有任何编程基础的人来说，要学习一门编程语言还是难度较大。为了降低她的入门难度，同时从实际行动上表达我对她事业的支持，我也和她一起学习 R 语言。</p>
<p>该系列文章是《R 语言入门与实践》一书的学习笔记，尽管这本书比较老了，但是非常基础，比较适合没有编程经验的读者学习 R 语言。</p>
<span id="more"></span>

<h2 id="R-基础"><a href="#R-基础" class="headerlink" title="R 基础"></a>R 基础</h2><p>数据科学的基石是存储大量数据并根据需求随时调用数据的能力。对于每天跟数据打交道的人来说，编程是一项必须的技能。图形用户界面简单易用，但也有着根本的局限性，因为它束缚了 <code>好的数据分析</code> 应该具备的以下三个属性：</p>
<ul>
<li>可再现性：能够完全再现之前某个分析结果的能力</li>
<li>自动化：当数据发生改变时，能够快速更新分析结果的能力</li>
<li>沟通：代码仅仅是一段文本，十分利于沟通</li>
</ul>
<p>R 语言的传统强项是建模与作图，但是本书将 R 语言视为一门纯粹的编程语言，而不是统计软件。在使用 R 之前，首先需要安装 <a target="_blank" rel="noopener" href="https://cran.r-project.org/">R</a> 和 <a target="_blank" rel="noopener" href="https://posit.co/download/rstudio-desktop/">RStudio</a>。</p>
<p>本章的项目是要模拟一对骰子，并利用这对骰子生成随机数字。要模拟一对骰子，你必须将每个骰子的特征提取出来。</p>
<h3 id="R-的用户界面"><a href="#R-的用户界面" class="headerlink" title="R 的用户界面"></a>R 的用户界面</h3><p>在正式的 R 编程之前，首先需要学习 RStudio 的使用。RStudio 是 R 语言的开发工具，方便我们进行 R 程序的开发调试。如下是在 RStudio 的控制台界面输入一段代码（命令）：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="number">1</span> <span class="operator">+</span> <span class="number">1</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">2</span></span><br><span class="line"><span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>

<p>这里输出结果 2 之前的 <code>[1]</code> 表示其为输出结果中的第一个值。当返回结果有多个值，R 可能需要多行来显示，并且用括号内嵌数字来标示每一行的起始数值在整个返回结果中的序号：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="number">1</span><span class="operator">:</span><span class="number">100</span></span><br><span class="line">  <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span>   <span class="number">5</span>   <span class="number">6</span>   <span class="number">7</span>   <span class="number">8</span>   <span class="number">9</span>  <span class="number">10</span>  <span class="number">11</span>  <span class="number">12</span>  <span class="number">13</span>  <span class="number">14</span>  <span class="number">15</span>  <span class="number">16</span>  <span class="number">17</span>  <span class="number">18</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">19</span><span class="punctuation">]</span>  <span class="number">19</span>  <span class="number">20</span>  <span class="number">21</span>  <span class="number">22</span>  <span class="number">23</span>  <span class="number">24</span>  <span class="number">25</span>  <span class="number">26</span>  <span class="number">27</span>  <span class="number">28</span>  <span class="number">29</span>  <span class="number">30</span>  <span class="number">31</span>  <span class="number">32</span>  <span class="number">33</span>  <span class="number">34</span>  <span class="number">35</span>  <span class="number">36</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">37</span><span class="punctuation">]</span>  <span class="number">37</span>  <span class="number">38</span>  <span class="number">39</span>  <span class="number">40</span>  <span class="number">41</span>  <span class="number">42</span>  <span class="number">43</span>  <span class="number">44</span>  <span class="number">45</span>  <span class="number">46</span>  <span class="number">47</span>  <span class="number">48</span>  <span class="number">49</span>  <span class="number">50</span>  <span class="number">51</span>  <span class="number">52</span>  <span class="number">53</span>  <span class="number">54</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">55</span><span class="punctuation">]</span>  <span class="number">55</span>  <span class="number">56</span>  <span class="number">57</span>  <span class="number">58</span>  <span class="number">59</span>  <span class="number">60</span>  <span class="number">61</span>  <span class="number">62</span>  <span class="number">63</span>  <span class="number">64</span>  <span class="number">65</span>  <span class="number">66</span>  <span class="number">67</span>  <span class="number">68</span>  <span class="number">69</span>  <span class="number">70</span>  <span class="number">71</span>  <span class="number">72</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">73</span><span class="punctuation">]</span>  <span class="number">73</span>  <span class="number">74</span>  <span class="number">75</span>  <span class="number">76</span>  <span class="number">77</span>  <span class="number">78</span>  <span class="number">79</span>  <span class="number">80</span>  <span class="number">81</span>  <span class="number">82</span>  <span class="number">83</span>  <span class="number">84</span>  <span class="number">85</span>  <span class="number">86</span>  <span class="number">87</span>  <span class="number">88</span>  <span class="number">89</span>  <span class="number">90</span></span><br><span class="line"> <span class="punctuation">[</span><span class="number">91</span><span class="punctuation">]</span>  <span class="number">91</span>  <span class="number">92</span>  <span class="number">93</span>  <span class="number">94</span>  <span class="number">95</span>  <span class="number">96</span>  <span class="number">97</span>  <span class="number">98</span>  <span class="number">99</span> <span class="number">100</span></span><br></pre></td></tr></table></figure>

<ul>
<li>当输入的代码不完整时，控制台提示符会显示一个 <code>+</code>，表示等待继续输入代码。</li>
<li>R 解释器会忽略这些以 # 开头的代码行，所以在 R 语言中可以使用 <code>#</code> 开启注释</li>
<li>输入 Ctrl-C 可以终止控制台中 R 代码的执行</li>
</ul>
<p>不同于 C 语言这种静态编程语言，R 语言是一种动态编程语言，这就意味着你在运行 R 代码时，编译操作会由 R 自动完成。</p>
<h3 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h3><p>在 R 中，保存数据就是将数据存储到 R 对象中：要创建一个 R 对象，先确定一个名称，再使用赋值符号（<code>&lt;-</code>）将数据赋值给它。此时 R 会生成一个具有该名称的 R 对象，并将赋值符号后面的数值存储在其中。每次创建一个 R 对象后，该对象就会显示在 RStudio 的环境面板上。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> die <span class="operator">&lt;-</span> 1<span class="operator">:</span><span class="number">6</span></span><br><span class="line"><span class="operator">&gt;</span> die</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span></span><br></pre></td></tr></table></figure>

<p>R 对象命名规范：</p>
<ul>
<li>不能以数字开头</li>
<li>一些特殊符号不能使用，例如 <code>^、!、$、@、+、-</code> 等</li>
<li>R 对象名称区分大小写</li>
</ul>
<p>同一个对象如果被多次赋值，那么 R 会自动覆盖存储在该对象中的信息。可以使用 ls 查看已经命名了哪些 R 对象。</p>
<p>如果在一个运算中涉及两个或两个以上的向量，R 会将这些向量排成一行并执行一系列单独的运算。如果两个向量的长度不相等，R 会在较短的向量上重复，直到其长度与较长向量相同，然后再执行运算。需要注意，此时短向量本身不会产生任何实质性的影响。如果长向量的长度值不是短向量长度值的整数倍，那么 R 在返回运算结果的同时也会返回一条警告消息。<strong>R 的这种行为称为向量循环，可帮助 R 执行元素方式运算</strong>。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> die</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span></span><br><span class="line"><span class="operator">&gt;</span> die <span class="operator">*</span> die</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>  <span class="number">1</span>  <span class="number">4</span>  <span class="number">9</span> <span class="number">16</span> <span class="number">25</span> <span class="number">36</span></span><br></pre></td></tr></table></figure>

<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="number">1</span><span class="operator">:</span><span class="number">2</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1</span> <span class="number">2</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="number">1</span><span class="operator">:</span><span class="number">4</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span></span><br><span class="line"><span class="operator">&gt;</span> die <span class="operator">+</span> <span class="number">1</span><span class="operator">:</span><span class="number">2</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">2</span> <span class="number">4</span> <span class="number">4</span> <span class="number">6</span> <span class="number">6</span> <span class="number">8</span></span><br><span class="line"><span class="operator">&gt;</span> die <span class="operator">+</span> <span class="number">1</span><span class="operator">:</span><span class="number">4</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">2</span> <span class="number">4</span> <span class="number">6</span> <span class="number">8</span> <span class="number">6</span> <span class="number">8</span></span><br><span class="line">Warning message<span class="operator">:</span></span><br><span class="line">In die <span class="operator">+</span> <span class="number">1</span><span class="operator">:</span><span class="number">4</span> <span class="operator">:</span></span><br><span class="line">  longer object <span class="built_in">length</span> is not a multiple of shorter object <span class="built_in">length</span></span><br></pre></td></tr></table></figure>

<p>R 语言同样支持传统的矩阵乘法，只是在你需要使用矩阵乘法时，必须做出请求，例如使用 <code>%*%</code> 来执行内乘法，使用 <code>%o%</code> 执行外乘法，使用 t 命令执行矩阵转置乘法，使用 det 命令获取矩阵的行列式。</p>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><p>R 中函数的使用方法非常简单，只需要使用函数名称并在其后的括号中键入相应的数据即可。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="built_in">round</span><span class="punctuation">(</span><span class="number">3.15</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">3</span></span><br><span class="line"><span class="operator">&gt;</span> factorial<span class="punctuation">(</span><span class="number">3</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">6</span></span><br></pre></td></tr></table></figure>

<p>传递到函数中的数据被称为该函数的参数。参数可以是原始数据、R 对象、甚至是另一个 R 函数的返回结果。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="built_in">round</span><span class="punctuation">(</span>mean<span class="punctuation">(</span>die<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">4</span></span><br></pre></td></tr></table></figure>

<p>R 中提供了 sample 函数，可以模拟投骰子。sample 函数有两个参数：一个名为 x 的向量和一个名为 size 的数字。sample 的作用就是从向量 x 中抽取 size 个元素并返回。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> sample<span class="punctuation">(</span>x <span class="operator">=</span> die<span class="punctuation">,</span> size <span class="operator">=</span> <span class="number">1</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">6</span></span><br><span class="line"><span class="operator">&gt;</span> sample<span class="punctuation">(</span>x <span class="operator">=</span> die<span class="punctuation">,</span> size <span class="operator">=</span> <span class="number">1</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">2</span></span><br><span class="line"><span class="operator">&gt;</span> sample<span class="punctuation">(</span>x <span class="operator">=</span> die<span class="punctuation">,</span> size <span class="operator">=</span> <span class="number">1</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">5</span></span><br></pre></td></tr></table></figure>

<p>在调用函数时，可以设置将哪个数据对象赋值给该函数中的哪个参数，方法是将这个数据对象的名称与参数用等号连接起来。在给有着多个参数的函数设置参数值时尤为重要：将数据对象明确指定给某个参数名称，可以避免错误传递数据。</p>
<p>在调用一个包含多个参数的函数时，从第二个或者第三个参数开始，就应该写出每个参数的名称。因为第一个参数的含义通常指向是明确的，但是要记住函数的第三、第四个参数的含义，就比较困难。而且详细写出函数名称可以防止出现错误。如果没有写出参数名称，那么 R 会按照顺序将你的值与函数的参数匹配。如果详细写出参数名称，R 会始终将某个值与其参数名称相匹配，而无论其参数顺序如何。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> sample<span class="punctuation">(</span>die<span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">6</span></span><br><span class="line"><span class="operator">&gt;</span> sample<span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span> die<span class="punctuation">)</span></span><br><span class="line">Error <span class="keyword">in</span> sample.int<span class="punctuation">(</span>x<span class="punctuation">,</span> size<span class="punctuation">,</span> replace<span class="punctuation">,</span> prob<span class="punctuation">)</span> <span class="operator">:</span> <span class="string">&#x27;size&#x27;</span>参数不对</span><br><span class="line"><span class="operator">&gt;</span> sample<span class="punctuation">(</span>size <span class="operator">=</span> <span class="number">1</span><span class="punctuation">,</span> x <span class="operator">=</span> die<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">2</span></span><br></pre></td></tr></table></figure>

<p>可以使用 args 函数查看某个函数的所有参数名称：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> args<span class="punctuation">(</span>sample<span class="punctuation">)</span></span><br><span class="line"><span class="keyword">function</span> <span class="punctuation">(</span>x<span class="punctuation">,</span> size<span class="punctuation">,</span> replace <span class="operator">=</span> <span class="literal">FALSE</span><span class="punctuation">,</span> prob <span class="operator">=</span> <span class="literal">NULL</span><span class="punctuation">)</span></span><br><span class="line"><span class="literal">NULL</span></span><br></pre></td></tr></table></figure>

<p>函数的参数可以有默认值，这些参数被称为可选参数。可选参数如果没有被明确赋值，就会使用其默认值。</p>
<h3 id="可放回抽样"><a href="#可放回抽样" class="headerlink" title="可放回抽样"></a>可放回抽样</h3><p>在使用 sample 函数时，如果将 size 设置为 2，那么几乎可以模拟一对骰子。但是这种方法有个问题，两个骰子的点数不可能一模一样。因为 sample 默认使用的是不可放回抽样。如果额外设定参数 <code>replace = TRUE</code>，那么就可以实现可放回抽样。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt; sample(size = 2, x = die)</span><br><span class="line">[1] 1 6</span><br><span class="line">&gt; sample(size = 2, x = die)</span><br><span class="line">[1] 2 3</span><br><span class="line">&gt; sample(size = 2, x = die)</span><br><span class="line">[1] 2 4</span><br><span class="line">&gt; sample(size = 2, x = die, replace=TRUE)</span><br><span class="line">[1] 1 1</span><br><span class="line">&gt; sample(size = 2, x = die, replace=TRUE)</span><br><span class="line">[1] 3 6</span><br><span class="line">&gt; sample(size = 2, x = die, replace=TRUE)</span><br><span class="line">[1] 2 2</span><br></pre></td></tr></table></figure>

<p>可放回抽样法是创建独立随机样本的一种简单方法。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> dice <span class="operator">=</span> sample<span class="punctuation">(</span>size <span class="operator">=</span> <span class="number">2</span><span class="punctuation">,</span> x <span class="operator">=</span> die<span class="punctuation">,</span> replace<span class="operator">=</span><span class="literal">TRUE</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> dice</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">4</span> <span class="number">5</span></span><br><span class="line"><span class="operator">&gt;</span> dice</span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">4</span> <span class="number">5</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">sum</span><span class="punctuation">(</span>dice<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">9</span></span><br></pre></td></tr></table></figure>

<h3 id="编写自定义函数"><a href="#编写自定义函数" class="headerlink" title="编写自定义函数"></a>编写自定义函数</h3><p>接下来编写一个函数 roll，用来投掷虚拟的骰子。R 函数其实就是一种不同类型的 R 对象，它们包含的不是数据，而是代码。任何一个 R 函数都包含 3 个部分：</p>
<ul>
<li>函数名</li>
<li>函数主体</li>
<li>参数集合</li>
</ul>
<p>如下将投掷骰子的过程模拟成一个函数：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">roll <span class="operator">&lt;-</span> <span class="keyword">function</span><span class="punctuation">(</span><span class="punctuation">)</span> <span class="punctuation">&#123;</span></span><br><span class="line">  die <span class="operator">&lt;-</span><span class="number">1</span><span class="operator">:</span><span class="number">6</span></span><br><span class="line">  dice <span class="operator">&lt;-</span> sample<span class="punctuation">(</span>die<span class="punctuation">,</span> size <span class="operator">=</span> <span class="number">2</span><span class="punctuation">,</span> replace <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">)</span></span><br><span class="line">  <span class="built_in">sum</span><span class="punctuation">(</span>dice<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>function 的作用是将大括号内的所有代码都构建成一个函数</li>
<li>大括号内的每一行代码都进行了缩进，目的是提高代码的可读性</li>
<li>利用 function 构建函数之后，可以将其输出保存到某个 R 对象中。这个对象就是构建的新函数</li>
<li>使用对象名称 + <code>()</code> 即可调用函数（假设没有参数）</li>
</ul>
<p>函数的运行结果就是最后一行代码（逻辑上）的运行结果。如果最后一行不返回任何值，整个函数也不会返回任何值。</p>
<p>创建自定义函数后，R 对待它的方式与 R 中其他函数没有任何区别。</p>
<h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><p>如下定义的函数包含了 bones 这个参数。那么调用该函数时也需要传递对应的参数：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">roll2 <span class="operator">&lt;-</span> <span class="keyword">function</span><span class="punctuation">(</span>bones<span class="punctuation">)</span> <span class="punctuation">&#123;</span></span><br><span class="line">  dice <span class="operator">=</span> sample<span class="punctuation">(</span>bones<span class="punctuation">,</span> size <span class="operator">=</span> <span class="number">2</span><span class="punctuation">,</span> replace <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">)</span></span><br><span class="line">  <span class="built_in">sum</span><span class="punctuation">(</span>dice<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line">roll2<span class="punctuation">(</span>bones <span class="operator">=</span> <span class="number">1</span><span class="operator">:</span><span class="number">4</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>

<p>此时调用 <code>roll2</code> 时如果不提供参数，就会出现错误。我们可以为该函数提供一个初始默认值：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">roll2 <span class="operator">&lt;-</span> <span class="keyword">function</span><span class="punctuation">(</span>bones <span class="operator">=</span> <span class="number">1</span><span class="operator">:</span><span class="number">6</span><span class="punctuation">)</span> <span class="punctuation">&#123;</span></span><br><span class="line">  dice <span class="operator">=</span> sample<span class="punctuation">(</span>bones<span class="punctuation">,</span> size <span class="operator">=</span> <span class="number">2</span><span class="punctuation">,</span> replace <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">)</span></span><br><span class="line">  <span class="built_in">sum</span><span class="punctuation">(</span>dice<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line">roll2<span class="punctuation">(</span>bones <span class="operator">=</span> <span class="number">1</span><span class="operator">:</span><span class="number">4</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>

<p>自定义函数中可以设置任意数量的参数，只要在 function 后的括号列表中列出它们的名称即可，并用逗号隔开。</p>
<h3 id="脚本"><a href="#脚本" class="headerlink" title="脚本"></a>脚本</h3><p>可以通过 R 脚本创建代码草稿。在 RStudio 中，使用 <code>File-&gt;New File-&gt;R Script</code> 来创建一个新的 R 脚本。</p>
<p>想要自动运行脚本中的某一行代码，只需要单击 <code>Run</code> 按钮即可。R 默认会运行鼠标光标所在的那一行代码，如果在脚本中选中了一整段代码，R 就会运行这段代码。通过 <code>Source</code> 按钮，可以运行脚本中的所有代码。</p>
<p>RStudio 还内置了创建函数的工具，只需要将 R 脚本中想转换为函数的代码段选中，使用 <code>Code-&gt;Extract Function</code> 即可提取到函数。它会自动检查代码段中没有定义的变量，并将它们设置为函数参数。</p>
<h2 id="R-包与帮助文档"><a href="#R-包与帮助文档" class="headerlink" title="R 包与帮助文档"></a>R 包与帮助文档</h2><p>接下来让这对骰子投出大点数的概率稍高于投出小点数的概率。在对这对骰子加权之前，首先需要确保这对骰子原本是均匀的。有两个工具可以实现这一点：重复（repetition）和可视化（visualization）。这也是数据科学领域最有用的两个工具。</p>
<p>R 中的 replicate 函数可以重复某一动作，qplot 可以将结果可视化。qplot 并不是 R 自带的函数，它来自一个独立的 R 包。</p>
<h3 id="R-包"><a href="#R-包" class="headerlink" title="R 包"></a>R 包</h3><p>很多开发者已经利用 R 设计了可以帮助人们分析数据的工具，这些工具提供给大家无偿使用，只需要下载对应的 R 包即可。<strong>一个 R 包就是一些有用的函数、帮助文档和数据集的集合</strong>。在加载 R 包之后，就可以在 R 代码中使用这个 R 包所提供的函数了。R 包的作者们构成了庞大的 R 社区（很多 R 包作者同时也是非常活跃的数据科学家）；许多已经写好的、针对某些常见的数据科学任务可以拿来即用。</p>
<p>R 基础包是指 <code>每次打开 R 之后，R 默认就加载的所有函数</code>。这些函数构成了 R 语言的基石，不需要加载任何 R 包就可以使用它们。</p>
<p>想要安装某个 R 包，首先需要在计算机中安装这个包，然后在当前的 R 会话中加载它。安装 R 包最简单的方法是利用 <code>install.packages</code> 函数。打开 R 并在命令行中输入以下命令：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">install.packages<span class="punctuation">(</span><span class="string">&quot;包名称&quot;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>

<p>R 会在 CRAN 上的所有 R 包集合中搜索具有该名称的包，搜索成功后则会下载并将其安装到本地计算机的 R 包文件夹内。本地安装完成之后，在以后的 R 会话中要使用该包，只需加载即可，无需重新下载安装。也可以同时安装多个 R 包，只需要使用连接函数 c 将这些包的名称连接起来即可：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">install.packages<span class="punctuation">(</span><span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;ggplot2&quot;</span><span class="punctuation">,</span> <span class="string">&quot;reshape2&quot;</span><span class="punctuation">,</span> <span class="string">&quot;dplyr&quot;</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>

<p>通过如下方式在 R 会话中加载 R 包（这里包名称的双引号是可选的）：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">library<span class="punctuation">(</span>包名称<span class="punctuation">)</span></span><br></pre></td></tr></table></figure>

<p>library 命令的效果是，在当前 R 会话被关闭之前，该包中的所有函数、数据集和帮助文档都可以被拿来即用。如果想查看当前 R 库中存储了哪些 R 包，可以运行如下代码：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">library<span class="punctuation">(</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>

<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Packages <span class="keyword">in</span> library ‘<span class="operator">/</span>Library<span class="operator">/</span>Frameworks<span class="operator">/</span>R.framework<span class="operator">/</span>Versions<span class="operator">/</span><span class="number">4.3</span><span class="operator">-</span>arm64<span class="operator">/</span>Resources<span class="operator">/</span>library’<span class="operator">:</span></span><br><span class="line"></span><br><span class="line">base                           The R Base Package</span><br><span class="line">boot                           Bootstrap Functions <span class="punctuation">(</span>Originally by Angelo Canty <span class="keyword">for</span> S<span class="punctuation">)</span></span><br><span class="line"><span class="built_in">class</span>                          Functions <span class="keyword">for</span> Classification</span><br><span class="line">cluster                        <span class="string">&quot;Finding Groups in Data&quot;</span><span class="operator">:</span> Cluster Analysis Extended Rousseeuw</span><br><span class="line">                               et al.</span><br><span class="line">codetools                      Code Analysis Tools <span class="keyword">for</span> R</span><br><span class="line">compiler                       The R Compiler Package</span><br><span class="line">datasets                       The R Datasets Package</span><br><span class="line">......</span><br></pre></td></tr></table></figure>

<p>可以看到，<code>library()</code> 还会显示 R 库的实际文件路径，即包含所有 R 包的文件夹位置。</p>
<p>许多 R 包并没有在 CRAN 上托管，要安装这些 R 包，可以借助 devtools 这个 R 包。它提供了 install_github, install_gitorious, install_bitbucket, install_url 等函数。它们类似于 install.packages，但是安装源不同。</p>
<p>只安装和加载自己需要的 R 包可以减轻 R 软件的负载，也使得 R 的使用更加迅捷。同时也可以在不更新 R 的情况下，只更新某个单独的 R 包。</p>
<h2 id="安装并加载-ggplot2-包"><a href="#安装并加载-ggplot2-包" class="headerlink" title="安装并加载 ggplot2 包"></a>安装并加载 ggplot2 包</h2><p>如下安装并加载 <code>ggplot2</code> 包</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> install.packages<span class="punctuation">(</span><span class="string">&quot;ggplot2&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> library<span class="punctuation">(</span><span class="string">&quot;ggplot2&quot;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>

<p>接下来就可以使用该包中的函数了，例如：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> qplot</span><br><span class="line"><span class="keyword">function</span> <span class="punctuation">(</span>x<span class="punctuation">,</span> y<span class="punctuation">,</span> ...<span class="punctuation">,</span> data<span class="punctuation">,</span> facets <span class="operator">=</span> <span class="literal">NULL</span><span class="punctuation">,</span> margins <span class="operator">=</span> <span class="literal">FALSE</span><span class="punctuation">,</span> geom <span class="operator">=</span> <span class="string">&quot;auto&quot;</span><span class="punctuation">,</span></span><br><span class="line">    xlim <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="literal">NA</span><span class="punctuation">,</span> <span class="literal">NA</span><span class="punctuation">)</span><span class="punctuation">,</span> ylim <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="literal">NA</span><span class="punctuation">,</span> <span class="literal">NA</span><span class="punctuation">)</span><span class="punctuation">,</span> <span class="built_in">log</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span> main <span class="operator">=</span> <span class="literal">NULL</span><span class="punctuation">,</span></span><br><span class="line">    xlab <span class="operator">=</span> <span class="literal">NULL</span><span class="punctuation">,</span> ylab <span class="operator">=</span> <span class="literal">NULL</span><span class="punctuation">,</span> asp <span class="operator">=</span> <span class="literal">NA</span><span class="punctuation">,</span> stat <span class="operator">=</span> deprecated<span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    position <span class="operator">=</span> deprecated<span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">......</span><br></pre></td></tr></table></figure>

<p>qplot 的含义是快速绘图（quick plot），如果把两个长度相同的数值交给 qplot，它会绘制出一副散点图，它将第一个向量作为一组 x 值，将第二个向量作为一组 y 值。如下是一个示例：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="operator">-</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">0</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">,</span> <span class="number">2.1</span><span class="punctuation">,</span> <span class="number">2.2</span><span class="punctuation">)</span></span><br><span class="line">y <span class="operator">&lt;-</span> x<span class="operator">^</span><span class="number">3</span></span><br><span class="line">qplot<span class="punctuation">(</span>x<span class="punctuation">,</span> y<span class="punctuation">)</span></span><br></pre></td></tr></table></figure>

<img src="/fuchencong.github.io/2024/04/01/hands-on-r-01/images/Rplot.png" class="">

<p>这个例子使用了 c 函数来创建数值向量（c 代表 concatenate）。</p>
<p>在描述两个变量之间的关系时，散点图是非常有用的工具。而直方图则可以用来可视化单一变量的分布情况：对于这个变量中的每一个值 x，直方图会展示有多少数据点落在这个值内。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">,</span> <span class="number">2</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">)</span></span><br><span class="line">qplot<span class="punctuation">(</span>x<span class="punctuation">,</span> binwidth <span class="operator">=</span> <span class="number">1</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>

<img src="/fuchencong.github.io/2024/04/01/hands-on-r-01/images/Rplot01.png" class="">

<p>replicate 函数提供了快速重复运行一段 R 代码的快捷方法。如果需要使用它，需要提供你想要重复运行的次数，已经想要重复运行的 R 代码。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> replicate<span class="punctuation">(</span><span class="number">3</span><span class="punctuation">,</span> <span class="number">1</span> <span class="operator">+</span> <span class="number">1</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">2</span> <span class="number">2</span> <span class="number">2</span></span><br></pre></td></tr></table></figure>

<p>接下来使用 qplot 模拟骰子投递过程：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">roll2 <span class="operator">&lt;-</span> <span class="keyword">function</span><span class="punctuation">(</span>bones <span class="operator">=</span> <span class="number">1</span><span class="operator">:</span><span class="number">6</span><span class="punctuation">)</span> <span class="punctuation">&#123;</span></span><br><span class="line">  dice <span class="operator">=</span> sample<span class="punctuation">(</span>bones<span class="punctuation">,</span> size <span class="operator">=</span> <span class="number">2</span><span class="punctuation">,</span> replace <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">)</span></span><br><span class="line">  <span class="built_in">sum</span><span class="punctuation">(</span>dice<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line">rolls <span class="operator">=</span> replicate<span class="punctuation">(</span><span class="number">10000</span><span class="punctuation">,</span> roll2<span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">qplot<span class="punctuation">(</span>rolls<span class="punctuation">,</span> binwidth <span class="operator">=</span> <span class="number">1</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>

<p>得到如下结果：</p>
<img src="/fuchencong.github.io/2024/04/01/hands-on-r-01/images/Rplot02.png" class="">

<h3 id="帮助页面"><a href="#帮助页面" class="headerlink" title="帮助页面"></a>帮助页面</h3><p>每个 R 函数都有自己的帮助页面，只需要键入问号并加上函数的名称既可以查看该函数的帮助页面：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="operator">?</span>qplot</span><br><span class="line"><span class="operator">&gt;</span> <span class="operator">?</span>sample</span><br></pre></td></tr></table></figure>

<p>如果一个函数来自某个 R 包，但并没有安装或加载该 R 包，那么使用上述方式并不能获得该函数的帮助页面。</p>
<p>一个帮助页面通常包含以下几个部分：</p>
<ul>
<li>函数描述</li>
<li>使用方法</li>
<li>参数</li>
<li>相关细节</li>
<li>返回值</li>
<li>另请参阅</li>
<li>代码示例</li>
</ul>
<p>如果忘记了函数的确切名称，又想找到这个函数的帮助页面，可以使用关键词搜索，即在关键词之前键入两个问号：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="operator">?</span><span class="operator">?</span><span class="built_in">log</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="operator">?</span><span class="operator">?</span>plot</span><br></pre></td></tr></table></figure>

<p>通过阅读 <code>sample()</code> 函数的帮助文档，可以得知其通过 <code>prob</code> 参数可以调整元素的权重：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">roll2 <span class="operator">&lt;-</span> <span class="keyword">function</span><span class="punctuation">(</span>bones <span class="operator">=</span> <span class="number">1</span><span class="operator">:</span><span class="number">6</span><span class="punctuation">)</span> <span class="punctuation">&#123;</span></span><br><span class="line">  dice <span class="operator">=</span> sample<span class="punctuation">(</span>bones<span class="punctuation">,</span> size <span class="operator">=</span> <span class="number">2</span><span class="punctuation">,</span> replace <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">,</span> prob<span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="operator">/</span><span class="number">8</span><span class="punctuation">,</span> <span class="number">1</span><span class="operator">/</span><span class="number">8</span><span class="punctuation">,</span> <span class="number">1</span><span class="operator">/</span><span class="number">8</span><span class="punctuation">,</span> <span class="number">1</span><span class="operator">/</span><span class="number">8</span><span class="punctuation">,</span> <span class="number">1</span><span class="operator">/</span><span class="number">8</span><span class="punctuation">,</span> <span class="number">3</span><span class="operator">/</span><span class="number">8</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">  <span class="built_in">sum</span><span class="punctuation">(</span>dice<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line">rolls <span class="operator">=</span> replicate<span class="punctuation">(</span><span class="number">10000</span><span class="punctuation">,</span> roll2<span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">qplot<span class="punctuation">(</span>rolls<span class="punctuation">,</span> binwidth <span class="operator">=</span> <span class="number">1</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>

<p>此时新的 <code>点数和</code> 模拟图如下所示：</p>
<img src="/fuchencong.github.io/2024/04/01/hands-on-r-01/images/Rplot03.png" class="">


<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a target="_blank" rel="noopener" href="https://web.itu.edu.tr/~tokerem/Hands-On_R.pdf">Hands-On Programming With R: Write Your Own Functions and Simulations</a></li>
</ul>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/fuchencong.github.io/tags/R/" rel="tag"># R</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/fuchencong.github.io/2024/05/15/ebpf-go-01/" rel="prev" title="ebpf-go 库学习（1）：ebpf-go 使用入门">
      <i class="fa fa-chevron-left"></i> ebpf-go 库学习（1）：ebpf-go 使用入门
    </a></div>
      <div class="post-nav-item">
    <a href="/fuchencong.github.io/2024/03/12/understanding-rust-01/" rel="next" title="深入理解 Rust（1）：Rust 中的字符串">
      深入理解 Rust（1）：Rust 中的字符串 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#R-%E5%9F%BA%E7%A1%80"><span class="nav-number">1.</span> <span class="nav-text">R 基础</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#R-%E7%9A%84%E7%94%A8%E6%88%B7%E7%95%8C%E9%9D%A2"><span class="nav-number">1.1.</span> <span class="nav-text">R 的用户界面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%B9%E8%B1%A1"><span class="nav-number">1.2.</span> <span class="nav-text">对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BD%E6%95%B0"><span class="nav-number">1.3.</span> <span class="nav-text">函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%AF%E6%94%BE%E5%9B%9E%E6%8A%BD%E6%A0%B7"><span class="nav-number">1.4.</span> <span class="nav-text">可放回抽样</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BC%96%E5%86%99%E8%87%AA%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0"><span class="nav-number">1.5.</span> <span class="nav-text">编写自定义函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%82%E6%95%B0"><span class="nav-number">1.6.</span> <span class="nav-text">参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%84%9A%E6%9C%AC"><span class="nav-number">1.7.</span> <span class="nav-text">脚本</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#R-%E5%8C%85%E4%B8%8E%E5%B8%AE%E5%8A%A9%E6%96%87%E6%A1%A3"><span class="nav-number">2.</span> <span class="nav-text">R 包与帮助文档</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#R-%E5%8C%85"><span class="nav-number">2.1.</span> <span class="nav-text">R 包</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E5%B9%B6%E5%8A%A0%E8%BD%BD-ggplot2-%E5%8C%85"><span class="nav-number">3.</span> <span class="nav-text">安装并加载 ggplot2 包</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%AE%E5%8A%A9%E9%A1%B5%E9%9D%A2"><span class="nav-number">3.1.</span> <span class="nav-text">帮助页面</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Reference"><span class="nav-number">4.</span> <span class="nav-text">Reference</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="fuchencong"
      src="/fuchencong.github.io/images/logo.jpeg">
  <p class="site-author-name" itemprop="name">fuchencong</p>
  <div class="site-description" itemprop="description">Having dreams is what makes life tolerable.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/fuchencong.github.io/archives/">
        
          <span class="site-state-item-count">177</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/fuchencong.github.io/categories/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/fuchencong.github.io/tags/">
          
        <span class="site-state-item-count">31</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/fuchencong" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;fuchencong" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:fuchencong@163.com" title="E-Mail → mailto:fuchencong@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">fuchencong</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/fuchencong.github.io/lib/anime.min.js"></script>
  <script src="/fuchencong.github.io/lib/velocity/velocity.min.js"></script>
  <script src="/fuchencong.github.io/lib/velocity/velocity.ui.min.js"></script>

<script src="/fuchencong.github.io/js/utils.js"></script>

<script src="/fuchencong.github.io/js/motion.js"></script>


<script src="/fuchencong.github.io/js/schemes/muse.js"></script>


<script src="/fuchencong.github.io/js/next-boot.js"></script>




  















  

  

</body>
</html>
