<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/fuchencong.github.io/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/fuchencong.github.io/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/fuchencong.github.io/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/fuchencong.github.io/images/logo.svg" color="#222">

<link rel="stylesheet" href="/fuchencong.github.io/css/main.css">


<link rel="stylesheet" href="/fuchencong.github.io/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"fuchencong.github.io","root":"/fuchencong.github.io/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="这篇文章介绍 Vim 中打开&#x2F;报错文件的各种技巧，以及用动作命令在文档中高效移动。">
<meta property="og:type" content="article">
<meta property="og:title" content="Vim 实用技巧（04）：打开、保存文件 &amp; 用动作命令在文档中移动">
<meta property="og:url" content="https://fuchencong.github.io/fuchencong.github.io/2018/10/05/practical-vim-04/index.html">
<meta property="og:site_name" content="fuchencong">
<meta property="og:description" content="这篇文章介绍 Vim 中打开&#x2F;报错文件的各种技巧，以及用动作命令在文档中高效移动。">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2018-10-05T06:35:32.000Z">
<meta property="article:modified_time" content="2024-08-13T07:01:12.912Z">
<meta property="article:author" content="fuchencong">
<meta property="article:tag" content="Vim">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://fuchencong.github.io/fuchencong.github.io/2018/10/05/practical-vim-04/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Vim 实用技巧（04）：打开、保存文件 & 用动作命令在文档中移动 | fuchencong</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/fuchencong.github.io/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">fuchencong</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">The way I am</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/fuchencong.github.io/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/fuchencong.github.io/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/fuchencong.github.io/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/fuchencong.github.io/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/fuchencong.github.io/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://fuchencong.github.io/fuchencong.github.io/2018/10/05/practical-vim-04/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/fuchencong.github.io/images/logo.jpeg">
      <meta itemprop="name" content="fuchencong">
      <meta itemprop="description" content="Having dreams is what makes life tolerable.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="fuchencong">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Vim 实用技巧（04）：打开、保存文件 & 用动作命令在文档中移动
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-10-05 14:35:32" itemprop="dateCreated datePublished" datetime="2018-10-05T14:35:32+08:00">2018-10-05</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/fuchencong.github.io/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/" itemprop="url" rel="index"><span itemprop="name">开发工具</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>这篇文章介绍 Vim 中打开&#x2F;报错文件的各种技巧，以及用动作命令在文档中高效移动。</p>
<span id="more"></span>

<h2 id="打开、保存文件"><a href="#打开、保存文件" class="headerlink" title="打开、保存文件"></a>打开、保存文件</h2><h3 id="技巧-41：用-edit-命令打开文件"><a href="#技巧-41：用-edit-命令打开文件" class="headerlink" title="技巧 41：用 :edit 命令打开文件"></a>技巧 41：用 <code>:edit</code> 命令打开文件</h3><p>在 Vim 中，<code>:edit</code> 命令允许通过文件的绝对路径或相对路径来打开文件。</p>
<p>在 Vim 中也有工作目录的概念，当 Vim 启动时，它会采用 shell 的活动目录作为其工作目录。可以在 Vim 中执行 <code>:pwd</code> 命令查看 Vim 的当前工作目录。</p>
<p>如果想打开的文件和当前活动缓冲区中的文件在同一个目录，如果能够采用活动缓冲区作为参考点，可以更方便。<code>%</code> 符号代表活动缓冲区中的完整路径，按下tab键会将其展开。而 <code>:h</code> 修饰符会去除文件名，但保留路径中的其它部分。因此，输入如下命令下，就会得到当前活动缓冲区的目录：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:edit %:h&lt;tab&gt;</span><br></pre></td></tr></table></figure>

<p>这个技巧除了可以用于 <code>:edit</code> 命令外，也可以用于 <code>:write</code>、<code>:saveas</code> 等命令。</p>
<h3 id="技巧-42：用-find-命令打开文件"><a href="#技巧-42：用-find-命令打开文件" class="headerlink" title="技巧 42：用 :find 命令打开文件"></a>技巧 42：用 <code>:find</code> 命令打开文件</h3><p><code>:find</code> 命令允许我们通过文件名打开一个文件，但无需输入该文件的完整路径。想利用此功能，我们首先要配置 <code>path</code> 选项。 <code>path</code> 选项允许我们指定一些目录，当调用 <code>:find</code> 命令时，Vim 会在这些目录中进行查找。可以使用 <code>:h &#39;path&#39;</code> 获取更多信息。</p>
<p>例如，通过如下方式将指定目录加入到path中：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:<span class="built_in">set</span> path+=Pratical_Vim/**</span><br></pre></td></tr></table></figure>

<p>其中 <code>**</code> 通配符会递归匹配 <code>Pratical_Vim</code> 下的所有子目录。</p>
<p>配置好 path 选项后，通过 find 命令，只需要给出文件名就可以打开指定目录中的文件了。如果文件名不唯一，使用 tab 键会自动补全所有匹配的完整文件路径。如果不进行 tab 选择，则 Vim 会打开第一个满足条件的文件。</p>
<h3 id="技巧-43：使用-netrw-管理文件系统"><a href="#技巧-43：使用-netrw-管理文件系统" class="headerlink" title="技巧 43：使用 netrw 管理文件系统"></a>技巧 43：使用 netrw 管理文件系统</h3><p>Vim 发行版中自带的 netrw 插件，允许我们对文件系统进行管理。netrw 是Vim 发行版的标准插件，因此不需要额外安装任何东西。但是必须确保 Vim 已被配置为可加载插件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> nocompatible</span><br><span class="line">filetype plugin on</span><br></pre></td></tr></table></figure>

<h4 id="结识-netrw：Vim原生的文件管理器"><a href="#结识-netrw：Vim原生的文件管理器" class="headerlink" title="结识 netrw：Vim原生的文件管理器"></a>结识 netrw：Vim原生的文件管理器</h4><p>当使用目录作为文件名启动 Vim 时，Vim 就会打开一个文件窗口管理器。文件管理器也是一个常规的 Vim 缓冲区，但它代表的是一个目录的内容，而不是文件的内容。</p>
<h4 id="打开文件管理器"><a href="#打开文件管理器" class="headerlink" title="打开文件管理器"></a>打开文件管理器</h4><p>使用 <code>:edit &#123;path&#125;</code> 命令打开文件管理器，只不过 path 是相应的目录名。例如使用 <code>:edit .</code> 命令，就可以查看当前 Vim工作目录的内容。</p>
<p>如果想打开当前活动缓冲区中文件所在的目录，可以使用 <code>:edit %:h</code>。另外，<code>:Explore</code> 命令也可以实现功能。另外，<code>:Sexplore</code> 及 <code>:Vexplore</code> 命令，可以分别在水平切分窗口及垂直切分窗口里打开文件管理器。</p>
<h4 id="与分割窗口协同工作"><a href="#与分割窗口协同工作" class="headerlink" title="与分割窗口协同工作"></a>与分割窗口协同工作</h4><p>在执行 <code>Explore</code> 命令时，文件管理器在当前活动窗口打开。如果在调出文件管理器后，又想切回到刚刚正在编辑的那个文件，可以使用 <code>&lt;C-r&gt;</code> 命令。所以 Vim 下，文件管理管理器与文件窗口间更像是翻转的关系。</p>
<h4 id="使用-netrw-完成更多功能"><a href="#使用-netrw-完成更多功能" class="headerlink" title="使用 netrw 完成更多功能"></a>使用 netrw 完成更多功能</h4><p><code>netrw</code> 插件不仅可以浏览文件系统，还可以创建新文件及目录，重命名已有文件及目录，或者删除它们。另外 <code>netrw</code> 插件的杀手级功能是：可以通过网络读写文件。</p>
<h3 id="技巧-44：把文件保存到不存在的目录中"><a href="#技巧-44：把文件保存到不存在的目录中" class="headerlink" title="技巧 44：把文件保存到不存在的目录中"></a>技巧 44：把文件保存到不存在的目录中</h3><p><code>:edit &#123;file&#125;</code> 命令一般用于打开一个已经存在的文件。如果指定的文件名并不存在，Vim 会创建一个新的空白缓冲区，并允许我们编辑（此时可以通过 <code>&lt;Ctrl-g&gt;</code> 命令查看文件状态）。随后执行 <code>:write</code> 命令时，Vim 就会将该缓冲区的内容写到所指定的新文件名中。但是，如果该文件名包含不存在的目录时，保存时 Vim 会提示错误。</p>
<p>此时我们可以通过调用外部程序 <code>mkdir</code> 进行补救：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">:!<span class="built_in">mkdir</span> -p %:h</span><br><span class="line">:write</span><br></pre></td></tr></table></figure>

<p>这里需要使用 <code>mkdir</code> 的 <code>-p</code> 参数进行递归创建。</p>
<h3 id="技巧-45：以超级用户权限保存文件"><a href="#技巧-45：以超级用户权限保存文件" class="headerlink" title="技巧 45：以超级用户权限保存文件"></a>技巧 45：以超级用户权限保存文件</h3><p>有时，我们不得不把修改保存到一个需要 sudo 权限的文件中，无需重启 Vim 就能实现这一功能。</p>
<p>例如，如果以普通用户修改 <code>/etc/hosts</code> 文件。此时，Vim 会把文件标识为 <code>[readonly]</code>，修改后，即使使用 <code>:write!</code> 命令，也无法将修改保存到文件中，因为没有修改该文件的权限。</p>
<p>此时，可以通过如下方式，对文件进行修改：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:write !sudo <span class="built_in">tee</span> % &gt; /dev/null</span><br></pre></td></tr></table></figure>

<p>其中，write 命令将当前缓冲区的内容作为标准输入，传递给 tee 命令，tee 命令又通过读取标准输入，将其保存到当前文件名中（% 代表当前缓冲区对应的文件名，即 &#x2F;etc&#x2F;hosts）。因此通过这条命令，就可以用root权限写入修改。</p>
<p>之后，由于 Vim 检测到文件被外部程序修改，通常这就意味着缓冲区中的内容和文件不同步了，因此 Vim 会提示我们做出选择，此时我们可以选择 <code>L（重新加载文件）</code>。</p>
<h2 id="用动作命令在文档中移动"><a href="#用动作命令在文档中移动" class="headerlink" title="用动作命令在文档中移动"></a>用动作命令在文档中移动</h2><p>Vim 提供了很多在文档中移动的方法以及许多在缓冲区间跳转的命令。接下来将重点介绍动作命令（motion），利用这些命令可以在文档中四处移动。</p>
<p>动作命令除了可以在文档中移动，还可以在操作符待决模式中使用。关于动作命令，可以参考 <code>:h motion.txt</code></p>
<h3 id="技巧-46：让手指保持在本位行上"><a href="#技巧-46：让手指保持在本位行上" class="headerlink" title="技巧 46：让手指保持在本位行上"></a>技巧 46：让手指保持在本位行上</h3><p>对于盲打人员，标准姿势是手指始终保留在 <code>home row</code>（即 <code>ASDGHJKL</code> 这一行）上。此时Vim提供如下命令来移动光标：</p>
<ul>
<li>h：左移一列</li>
<li>j：下移一行</li>
<li>k：上移一行</li>
<li>l：右移一列</li>
</ul>
<p>当然，除了通过这 4 个键，光标键中的上下左右也能够起到移动光标作用，但是并不方便。</p>
<p>可能有人觉得输入 <code>h</code> 命令进行移动时，并不方便，因为需要伸出食指才能按下它。但是，其实我们很少会用到h键。对于水平方向的移动而言，可以使用面向单词的命令，或者使用字符查找动作命令来进行更快地移动。一般，只是用 <code>h</code> 和 <code>l</code> 键解决差一错误。</p>
<h3 id="技巧-47：区分实际行与屏幕行"><a href="#技巧-47：区分实际行与屏幕行" class="headerlink" title="技巧 47：区分实际行与屏幕行"></a>技巧 47：区分实际行与屏幕行</h3><p>Vim 区分实际行与屏幕行。当 <code>wrap</code> 设置被启用时，每个超出窗口宽度的文本行都会被回绕显示。因此文件中的一行也会被显示为屏幕上的若干行。</p>
<p>要知道实际行与屏幕行之间的不同，最简单的方法是启用 <code>number</code> 设置。启用之后，以行号开头的行对应着一个实际行，它们会占据着屏幕上的一行或几行。回绕行的前面不会显示行号。</p>
<p>Vim提供了不同的动作命令来操作两者：</p>
<ul>
<li>j：向下移动一个实际行</li>
<li>gj：向下移动一个屏幕行</li>
<li>k：向上移动一个实际行</li>
<li>gk：向上移动一个屏幕行</li>
<li>0：移动到实际行的行首</li>
<li>g0：移动到屏幕行的行首</li>
<li>^：移动到实际行的第一个非空白字符</li>
<li>g^：移动到屏幕行的第一个非空白字符</li>
<li>$：移动到实际行的行尾</li>
<li>g$：移动到屏幕行的行尾</li>
</ul>
<h3 id="技巧-48：基于单词移动"><a href="#技巧-48：基于单词移动" class="headerlink" title="技巧 48：基于单词移动"></a>技巧 48：基于单词移动</h3><p>Vim 提供一组动作命令，让我们每次可以把光标正向或反向移动一个单词的距离。</p>
<ul>
<li>w：正向移动到下一单词的开头</li>
<li>b：反向移动到当前单词&#x2F;上一单词的开头</li>
<li>e：正向移动到当前单词&#x2F;下一单词结尾</li>
<li>ge：方向移动上一单词结尾</li>
</ul>
<p><code>w</code> 和 <code>b</code> 都是以词首为目标，而 <code>e</code> 和 <code>ge</code> 命令都是以词尾为目标。所以通过 <code>ea</code> 命令，我们可以很快在当前单词结尾添加新的内容，而 <code>gea</code> 命令则可以在上一个单词结尾添加内容。</p>
<p>Vim 对单词（word）和字串（WORD）有不同的定义。可以使用 <code>:h word</code> 和 <code>:h WORD</code> 获得更多帮助信息。简单来说，一个单词由字母，数字、下划线字符序列构成，而一个字串由非空白字符序列构成。所以，在如下语句中，包含10个单词、5个字串：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">e.g. we&#x27;are going too slow</span><br></pre></td></tr></table></figure>

<p>之前的 <code>w</code>，<code>b</code>，<code>e</code> 命令等都是基于单词的移动命令，而大写的 <code>W</code>，<code>B</code>，<code>E</code> 命令都是基于字串的移动命令：</p>
<ul>
<li>如果想更快地移动，可以使用面向字串的动作命令</li>
<li>如果想更细粒度的移动，可以使用面向单词的动作命令</li>
</ul>
<h3 id="技巧-49：对字符进行查找"><a href="#技巧-49：对字符进行查找" class="headerlink" title="技巧 49：对字符进行查找"></a>技巧 49：对字符进行查找</h3><p>Vim 的字符查找命令让我们可以在行内快速移动，并且他们能够在操作符待决模式下很好地工作。</p>
<p>查找字符时，可以是包含或是排除目标字符：</p>
<ul>
<li>f{char}：正向移动到下一个 {char} 所在之处</li>
<li>F{char}：反向移动到上一个 {char} 所在之处</li>
<li>t{char}：正向移动到下一个 {char} 所在之处的前一个字符上</li>
<li>T{char}：反向移动到上一个 {char} 所在之处的后一个字符上</li>
<li>;：重复上次的字符查找命令</li>
<li>,：反转方向，重复上次的字符查找命令</li>
</ul>
<p>通常来说，在当前行内快速移动时，倾向于使用 <code>f&#123;char&#125;</code> 和 <code>F&#123;Char&#125;</code> 。而如果需要和 <code>d&#123;motion&#125;</code> 或 <code>c&#123;motion&#125;</code> 一起使用时，更倾向于使用 <code>t&#123;char&#125;</code> 及 <code>T&#123;char&#125;</code> 命令。</p>
<p>另外，我们使用一次查找命令后，可以使用 <code>;</code> 进行重复，而当我们重复地忘乎所以而找到错误目标时，可以使用 <code>,</code> 进行反向查找，因此这又一次体现了 <code>执行-重复-回退</code> 的 Vim 精髓。</p>
<p>另外当我们移动到一个单词时，并不一定是要单词开头作为目标字符。因为有些字符重复频率非常高，这会导致我们移动效率变低，而选择一些不常见的字符，则可以更快移动到目标单词上，之后通过操作文本对象一样可以达到目的。</p>
<h3 id="技巧-50：通过查找进行移动"><a href="#技巧-50：通过查找进行移动" class="headerlink" title="技巧 50：通过查找进行移动"></a>技巧 50：通过查找进行移动</h3><p>字符查找命令一次只能查找一个字符，并且只能在当前行内查找。 如果想查找一个以上的字符，或者是移动到当前行之外的话，就需要使用查找命令。</p>
<p>使用 <code>/</code> 命令进行正向查找，<code>?</code> 命令进行反向查找。另外，使用 <code>n</code> 命令可以重复上次查找，而 <code>N</code> 命令则在相反方向上重复上次查找。</p>
<p>当启用了 <code>hlsearch</code> 时，可以高亮匹配项。如果文档中有多个匹配项时，可能会导致结果不太容易辨识。此时可以设置 <code>:set nohlsearch</code> 选项以关闭搜索时高亮匹配。</p>
<p>查找命令不仅可以在普通模式下使用，在可视模式及操作符待决模式下都可以使用。例如，在如下句子中：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">This phrase takes time but</span><br><span class="line">eventually gets to the point.</span><br></pre></td></tr></table></figure>

<p>如果想删除 <code>takes time but eventually</code>。可以直接使用 <code>d/ge&lt;CR&gt;</code>（假设当前光标在 t 上）。当然通过可视模式进行查找，然后在执行 <code>d</code> 命令进行删除也是可行的。但是直接使用 <code>d&#123;motion&#125;</code> 让你更加 cool。</p>
<h3 id="技巧-51：用精确的文本对象选择选区"><a href="#技巧-51：用精确的文本对象选择选区" class="headerlink" title="技巧 51：用精确的文本对象选择选区"></a>技巧 51：用精确的文本对象选择选区</h3><p>文本对象就是基于结构定义的文本区域，它允许我们操作括号、被引用的文本，XML标签以及其它文本中常见的结构。</p>
<p>Vim 的文本对象由两个字符构成，第一个字符永远是 <code>i</code> 或 <code>a</code> 。一般来说，<code>i</code> 开头的文本对象会选择分隔符内部的文本（include），而 <code>a</code> 开头的文本对象会选择包括分隔符在内的整个文本（all）。</p>
<p>如下总结了部分 Vim 内置的文本对象</p>
<ul>
<li>a) 或 ab：一对圆括号</li>
<li>i) 或 ib：一对圆括号内部</li>
<li>a} 或 aB：一对花括号</li>
<li>i} 或 iB：一对花括号内部</li>
<li>a]：一对方括号</li>
<li>i]：一对方括号内部</li>
<li>a&gt;：一对尖括号</li>
<li>i&gt;：一对尖括号内部</li>
<li>a’：一对单引号</li>
<li>i’：一对单引号内部</li>
<li>a”：一对双引号</li>
<li>i”：一对双引号内部</li>
<li>a&#96;：一对反引号</li>
<li>i&#96;：一对反引号内部</li>
<li>at：一对xml标签</li>
<li>it：xml标签内部</li>
</ul>
<p>文本对象自身并不是动作命令，不能用它们在文档中移动。但是可用于可视模型及操作符待决模式，而且在操作符待决模式下，威力更大。凡是在 <code>operator&#123;motion&#125;</code> 中，<code>motion</code> 都可以使用文本对象。</p>
<h3 id="技巧-52：删除周边，修改内部"><a href="#技巧-52：删除周边，修改内部" class="headerlink" title="技巧 52：删除周边，修改内部"></a>技巧 52：删除周边，修改内部</h3><p>文本对象通常是成对出现的，一个用于操作对象内部的文本，而另一个则操作周围的文本。上一技巧介绍了操作分隔符的文本对象（分隔符文本对象），这一节将介绍操作文本块（范围文本对象），如单词、句子和段落等。</p>
<ul>
<li>iw：当前单词</li>
<li>aw：当前单词及一个空格</li>
<li>iW：当前字串</li>
<li>aW：当前字串及一个空格</li>
<li>is：当前句子</li>
<li>aS：当前句子及一个空格</li>
<li>ip：当前段落</li>
<li>ap：当前段落及一个空行</li>
</ul>
<p>之所以会出现两套，是因为 <code>d&#123;motion&#125;</code> 命令和 <code>a</code> 开头文本对象配合效果更好（删除一个空格或空行），而 <code>c&#123;motion&#125;</code> 命令和 <code>i</code> 开头的文本对象配合效果更好（保留原来的空格或空行）。</p>
<h3 id="技巧-53：设置位置标记，以便快速调回"><a href="#技巧-53：设置位置标记，以便快速调回" class="headerlink" title="技巧 53：设置位置标记，以便快速调回"></a>技巧 53：设置位置标记，以便快速调回</h3><p><code>m&#123;a-zA-Z&#125;</code> 命令会用选定的字母标记当前光标所在位置，小写位置标记只在每个缓冲区里局部可见，而大写位置标记则全局可见。</p>
<p>Vim提供了两条普通模式命令，可以用他们跳转到一个位置标记上：</p>
<ul>
<li>‘{martk} 跳转到位置标记所在的行，并把光标置于该行第一个非空白字符上</li>
<li>&#96;{mark} 跳转到位置标记所在的行，并把光标置于设置位置标记时光标所在之处</li>
</ul>
<p>Vim 会自动为我们设置一些位置标记：</p>
<ul>
<li>&#96;&#96;：当前文件中上次跳转动作之前的位置</li>
<li>&#96;.：上次修改的地方</li>
<li>&#96;^：上次插入的地方</li>
<li>&#96;[：上次修改或复制的起始位置</li>
<li>&#96;]：上次修改或复制的结束位置</li>
<li>&#96;&lt;：上次高亮选区的起始位置</li>
<li>&#96;&gt;：上次高亮选区的结束位置</li>
</ul>
<h3 id="技巧-54：在匹配括号间跳转"><a href="#技巧-54：在匹配括号间跳转" class="headerlink" title="技巧 54：在匹配括号间跳转"></a>技巧 54：在匹配括号间跳转</h3><p><code>%</code> 命令允许我们在一组开、闭括号间跳转，可用于 <code>()</code>、<code>&#123;&#125;</code>、<code>[]</code> 等括号。每当使用 <code>%</code> 命令时，Vim 会自动为发生跳转的地方设置一个位置标记，因此通过 &#96;&#96; 命令也可以来回在括号间跳转。</p>
<p>Vim 发布时带了一个名为 <code>matchit</code> 的插件，它增强了 <code>%</code> 命令的功能。激活了 matchit 插件后，<code>%</code> 命令可以在匹配的关键字键跳转。尽管 matchit 插件随 Vim 一起发布，但是它缺省未使能。通过如下配置使能该插件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">runtime macros/matchit.vim</span><br></pre></td></tr></table></figure>

<p>另外再推荐一款插件，<code>surrond.vim</code>，可以很容易地给选中的文本添加分隔符。</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/fuchencong.github.io/tags/Vim/" rel="tag"># Vim</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/fuchencong.github.io/2018/10/06/practical-vim-05/" rel="prev" title="Vim 实用技巧（05）：在文件间跳转 & 复制粘贴">
      <i class="fa fa-chevron-left"></i> Vim 实用技巧（05）：在文件间跳转 & 复制粘贴
    </a></div>
      <div class="post-nav-item">
    <a href="/fuchencong.github.io/2018/10/04/practical-vim-03/" rel="next" title="Vim 实用技巧（03）：命令行模式 & 管理多个文件">
      Vim 实用技巧（03）：命令行模式 & 管理多个文件 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%89%93%E5%BC%80%E3%80%81%E4%BF%9D%E5%AD%98%E6%96%87%E4%BB%B6"><span class="nav-number">1.</span> <span class="nav-text">打开、保存文件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%80%E5%B7%A7-41%EF%BC%9A%E7%94%A8-edit-%E5%91%BD%E4%BB%A4%E6%89%93%E5%BC%80%E6%96%87%E4%BB%B6"><span class="nav-number">1.1.</span> <span class="nav-text">技巧 41：用 :edit 命令打开文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%80%E5%B7%A7-42%EF%BC%9A%E7%94%A8-find-%E5%91%BD%E4%BB%A4%E6%89%93%E5%BC%80%E6%96%87%E4%BB%B6"><span class="nav-number">1.2.</span> <span class="nav-text">技巧 42：用 :find 命令打开文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%80%E5%B7%A7-43%EF%BC%9A%E4%BD%BF%E7%94%A8-netrw-%E7%AE%A1%E7%90%86%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="nav-number">1.3.</span> <span class="nav-text">技巧 43：使用 netrw 管理文件系统</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%93%E8%AF%86-netrw%EF%BC%9AVim%E5%8E%9F%E7%94%9F%E7%9A%84%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E5%99%A8"><span class="nav-number">1.3.1.</span> <span class="nav-text">结识 netrw：Vim原生的文件管理器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%89%93%E5%BC%80%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E5%99%A8"><span class="nav-number">1.3.2.</span> <span class="nav-text">打开文件管理器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8E%E5%88%86%E5%89%B2%E7%AA%97%E5%8F%A3%E5%8D%8F%E5%90%8C%E5%B7%A5%E4%BD%9C"><span class="nav-number">1.3.3.</span> <span class="nav-text">与分割窗口协同工作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-netrw-%E5%AE%8C%E6%88%90%E6%9B%B4%E5%A4%9A%E5%8A%9F%E8%83%BD"><span class="nav-number">1.3.4.</span> <span class="nav-text">使用 netrw 完成更多功能</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%80%E5%B7%A7-44%EF%BC%9A%E6%8A%8A%E6%96%87%E4%BB%B6%E4%BF%9D%E5%AD%98%E5%88%B0%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E7%9B%AE%E5%BD%95%E4%B8%AD"><span class="nav-number">1.4.</span> <span class="nav-text">技巧 44：把文件保存到不存在的目录中</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%80%E5%B7%A7-45%EF%BC%9A%E4%BB%A5%E8%B6%85%E7%BA%A7%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E4%BF%9D%E5%AD%98%E6%96%87%E4%BB%B6"><span class="nav-number">1.5.</span> <span class="nav-text">技巧 45：以超级用户权限保存文件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%94%A8%E5%8A%A8%E4%BD%9C%E5%91%BD%E4%BB%A4%E5%9C%A8%E6%96%87%E6%A1%A3%E4%B8%AD%E7%A7%BB%E5%8A%A8"><span class="nav-number">2.</span> <span class="nav-text">用动作命令在文档中移动</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%80%E5%B7%A7-46%EF%BC%9A%E8%AE%A9%E6%89%8B%E6%8C%87%E4%BF%9D%E6%8C%81%E5%9C%A8%E6%9C%AC%E4%BD%8D%E8%A1%8C%E4%B8%8A"><span class="nav-number">2.1.</span> <span class="nav-text">技巧 46：让手指保持在本位行上</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%80%E5%B7%A7-47%EF%BC%9A%E5%8C%BA%E5%88%86%E5%AE%9E%E9%99%85%E8%A1%8C%E4%B8%8E%E5%B1%8F%E5%B9%95%E8%A1%8C"><span class="nav-number">2.2.</span> <span class="nav-text">技巧 47：区分实际行与屏幕行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%80%E5%B7%A7-48%EF%BC%9A%E5%9F%BA%E4%BA%8E%E5%8D%95%E8%AF%8D%E7%A7%BB%E5%8A%A8"><span class="nav-number">2.3.</span> <span class="nav-text">技巧 48：基于单词移动</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%80%E5%B7%A7-49%EF%BC%9A%E5%AF%B9%E5%AD%97%E7%AC%A6%E8%BF%9B%E8%A1%8C%E6%9F%A5%E6%89%BE"><span class="nav-number">2.4.</span> <span class="nav-text">技巧 49：对字符进行查找</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%80%E5%B7%A7-50%EF%BC%9A%E9%80%9A%E8%BF%87%E6%9F%A5%E6%89%BE%E8%BF%9B%E8%A1%8C%E7%A7%BB%E5%8A%A8"><span class="nav-number">2.5.</span> <span class="nav-text">技巧 50：通过查找进行移动</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%80%E5%B7%A7-51%EF%BC%9A%E7%94%A8%E7%B2%BE%E7%A1%AE%E7%9A%84%E6%96%87%E6%9C%AC%E5%AF%B9%E8%B1%A1%E9%80%89%E6%8B%A9%E9%80%89%E5%8C%BA"><span class="nav-number">2.6.</span> <span class="nav-text">技巧 51：用精确的文本对象选择选区</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%80%E5%B7%A7-52%EF%BC%9A%E5%88%A0%E9%99%A4%E5%91%A8%E8%BE%B9%EF%BC%8C%E4%BF%AE%E6%94%B9%E5%86%85%E9%83%A8"><span class="nav-number">2.7.</span> <span class="nav-text">技巧 52：删除周边，修改内部</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%80%E5%B7%A7-53%EF%BC%9A%E8%AE%BE%E7%BD%AE%E4%BD%8D%E7%BD%AE%E6%A0%87%E8%AE%B0%EF%BC%8C%E4%BB%A5%E4%BE%BF%E5%BF%AB%E9%80%9F%E8%B0%83%E5%9B%9E"><span class="nav-number">2.8.</span> <span class="nav-text">技巧 53：设置位置标记，以便快速调回</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%80%E5%B7%A7-54%EF%BC%9A%E5%9C%A8%E5%8C%B9%E9%85%8D%E6%8B%AC%E5%8F%B7%E9%97%B4%E8%B7%B3%E8%BD%AC"><span class="nav-number">2.9.</span> <span class="nav-text">技巧 54：在匹配括号间跳转</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="fuchencong"
      src="/fuchencong.github.io/images/logo.jpeg">
  <p class="site-author-name" itemprop="name">fuchencong</p>
  <div class="site-description" itemprop="description">Having dreams is what makes life tolerable.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/fuchencong.github.io/archives/">
        
          <span class="site-state-item-count">168</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/fuchencong.github.io/categories/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/fuchencong.github.io/tags/">
          
        <span class="site-state-item-count">31</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/fuchencong" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;fuchencong" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:fuchencong@163.com" title="E-Mail → mailto:fuchencong@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">fuchencong</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/fuchencong.github.io/lib/anime.min.js"></script>
  <script src="/fuchencong.github.io/lib/velocity/velocity.min.js"></script>
  <script src="/fuchencong.github.io/lib/velocity/velocity.ui.min.js"></script>

<script src="/fuchencong.github.io/js/utils.js"></script>

<script src="/fuchencong.github.io/js/motion.js"></script>


<script src="/fuchencong.github.io/js/schemes/muse.js"></script>


<script src="/fuchencong.github.io/js/next-boot.js"></script>




  















  

  

</body>
</html>
