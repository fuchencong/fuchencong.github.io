<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/fuchencong.github.io/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/fuchencong.github.io/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/fuchencong.github.io/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/fuchencong.github.io/images/logo.svg" color="#222">

<link rel="stylesheet" href="/fuchencong.github.io/css/main.css">


<link rel="stylesheet" href="/fuchencong.github.io/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"fuchencong.github.io","root":"/fuchencong.github.io/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="数组是值的有序集合，其中的值叫作元素。每个元素有一个数值表示的位置，叫作索引。这篇文章将详细介绍 JavaScript 的数组。">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaScript 权威指南 07：数组">
<meta property="og:url" content="https://fuchencong.github.io/fuchencong.github.io/2025/01/14/javascript-guide-07/index.html">
<meta property="og:site_name" content="fuchencong">
<meta property="og:description" content="数组是值的有序集合，其中的值叫作元素。每个元素有一个数值表示的位置，叫作索引。这篇文章将详细介绍 JavaScript 的数组。">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-01-14T06:13:15.000Z">
<meta property="article:modified_time" content="2025-04-23T09:41:56.817Z">
<meta property="article:author" content="fuchencong">
<meta property="article:tag" content="前端">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://fuchencong.github.io/fuchencong.github.io/2025/01/14/javascript-guide-07/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>JavaScript 权威指南 07：数组 | fuchencong</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/fuchencong.github.io/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">fuchencong</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">The way I am</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/fuchencong.github.io/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/fuchencong.github.io/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/fuchencong.github.io/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/fuchencong.github.io/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/fuchencong.github.io/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://fuchencong.github.io/fuchencong.github.io/2025/01/14/javascript-guide-07/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/fuchencong.github.io/images/logo.jpeg">
      <meta itemprop="name" content="fuchencong">
      <meta itemprop="description" content="Having dreams is what makes life tolerable.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="fuchencong">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          JavaScript 权威指南 07：数组
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-01-14 14:13:15" itemprop="dateCreated datePublished" datetime="2025-01-14T14:13:15+08:00">2025-01-14</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/fuchencong.github.io/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>数组是值的有序集合，其中的值叫作元素。每个元素有一个数值表示的位置，叫作索引。这篇文章将详细介绍 JavaScript 的数组。</p>
<span id="more"></span>
<h2 id="javascript-数组简介"><a class="markdownIt-Anchor" href="#javascript-数组简介"></a> JavaScript 数组简介</h2>
<ul>
<li>JavaScript 数组是无类型限制的，即数组中的元素可以是任意类型，同一数组的不同元素也可以是不同的类型</li>
<li>JavaScript 数组是基于零且使用 32 位数值索引的，第一个元素的索引为 0</li>
<li>JavaScript 数组是动态的，它们会按需增大或缩小，因此创建数组时无须声明一个固定大小，也无须在大小变化时重新为它们分配空间</li>
<li>JavaScript 数组可以是稀疏的，即元素不一定具有连续的索引，中间可能有间隙</li>
<li>每个 JavaScript 数组都有 length 属性。对于非稀疏数组，这个属性保存数组中元素的个数。对于稀疏数组，length 大于所有元素的最高索引</li>
</ul>
<p><strong>JavaScript 数组是一种特殊的 JavaScript 对象，因此数组索引更像是属性名，只不过碰巧是整数而已</strong>。实现通常对数组会进行特别优化，从而让访问数值索引的数组元素明显快于访问常规的对象属性。</p>
<p>数组从 <code>Array.prototype</code> 继承属性，这个原型上定义了很多数组操作方法。</p>
<h2 id="创建数组"><a class="markdownIt-Anchor" href="#创建数组"></a> 创建数组</h2>
<h3 id="数组字面量"><a class="markdownIt-Anchor" href="#数组字面量"></a> 数组字面量</h3>
<p>创建数组最简单的方式就是使用数组字面量。数组字面量其实就是一对方括号中逗号分隔的数组元素的列表。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">let</span> empty = []</span><br><span class="line">&gt; <span class="keyword">let</span> primes = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">11</span>]</span><br><span class="line">&gt; <span class="keyword">let</span> mixed = [<span class="number">1.1</span>, <span class="literal">true</span>, <span class="string">&quot;a&quot;</span>, ]</span><br></pre></td></tr></table></figure>
<p>数组字面量中的值不需要是常量，可以是任意表达式。数组字面量可以包含对象字面量或其他数组字面量。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">let</span> base = <span class="number">1024</span>;</span><br><span class="line">&gt; <span class="keyword">let</span> table = [base, base+<span class="number">1</span>, base+<span class="number">2</span>]</span><br><span class="line">&gt; <span class="keyword">let</span> b = [[<span class="number">1</span>, &#123;<span class="attr">x</span>:<span class="number">1</span>, <span class="attr">y</span>:<span class="number">2</span>&#125;], [<span class="number">2</span>, &#123;<span class="attr">x</span>:<span class="number">3</span>, <span class="attr">y</span>:<span class="number">4</span>&#125;]]</span><br></pre></td></tr></table></figure>
<p><strong>如果数组字面量中连续包含多个逗号，且逗号之间没有值，则这个数组就是稀疏的</strong>。这些省略了值的数组元素并不存在，但按照索引查询它们时又会返回 undefined：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">let</span> count = [<span class="number">1</span>,,,,<span class="number">5</span>]</span><br><span class="line"><span class="literal">undefined</span></span><br><span class="line">&gt; count.<span class="property">length</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line">&gt; <span class="keyword">let</span> e = [,,,]</span><br><span class="line"><span class="literal">undefined</span></span><br><span class="line">&gt; e.<span class="property">length</span></span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>
<p>由于数组字面量语法允许末尾出现逗号，因此 <code>[,,,]</code> 的长度是 3 不是 4。</p>
<h3 id="扩展操作符"><a class="markdownIt-Anchor" href="#扩展操作符"></a> 扩展操作符</h3>
<p>在 ES6 及之后的版本中，可以使用扩展操作符 <code>...</code>（实际上并不是真的操作符）在一个数组字面量中包含另一个数组的元素：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">let</span> a1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">&gt; <span class="keyword">let</span> a2 = [<span class="number">0</span>, ...a1, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">&gt; a2</span><br><span class="line">[ <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> ]</span><br></pre></td></tr></table></figure>
<p>扩展操作符是创建数组副本的一种便捷方式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">let</span> source = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">&gt; <span class="keyword">let</span> dest = [...source]</span><br><span class="line">&gt; dest</span><br><span class="line">[ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> ]</span><br><span class="line">&gt; source[<span class="number">0</span>] = <span class="number">0</span></span><br><span class="line"><span class="number">0</span></span><br><span class="line">&gt; source[<span class="number">0</span>]</span><br><span class="line"><span class="number">0</span></span><br><span class="line">&gt; dest[<span class="number">0</span>]</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>扩展操作符适用于任何可迭代对象，字符串是可迭代对象，因此可以使用扩展操作符把任意字符串转换为单个字符的数组：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">let</span> t = [...<span class="string">&quot;test&quot;</span>]</span><br><span class="line"><span class="literal">undefined</span></span><br><span class="line">&gt; t</span><br><span class="line">[ <span class="string">&#x27;t&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;s&#x27;</span>, <span class="string">&#x27;t&#x27;</span> ]</span><br></pre></td></tr></table></figure>
<p>集合对象也是可迭代的，因此要去除数组中的重复元素，一种便捷方式就是先把数组转换为集合，然后再使用扩展操作符把这个集合转换回数组：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">let</span> letters = [...<span class="string">&quot;hello world&quot;</span>]</span><br><span class="line">&gt; [...<span class="keyword">new</span> <span class="title class_">Set</span>(letters)]</span><br><span class="line">[</span><br><span class="line">  <span class="string">&#x27;h&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;l&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;o&#x27;</span>, <span class="string">&#x27; &#x27;</span>, <span class="string">&#x27;w&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;d&#x27;</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h3 id="array-构造函数"><a class="markdownIt-Anchor" href="#array-构造函数"></a> Array 构造函数</h3>
<p>另一种创建数组的方式是使用 <code>Array()</code> 构造函数。有三种方式可以调用这个构造函数：</p>
<ul>
<li>不传参数调用，创建一个空数组，等价于 <code>[]</code></li>
<li>传入一个参数，指定数组的长度。这样调用可以提前为数组分配空间，但是数组中不会存储任何值，访问数组元素都是未定义的</li>
<li>传入两个或更多个数组元素，或传入一个或多个非数值元素，此时参数会成为新数组的元素。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">let</span> a = <span class="keyword">new</span> <span class="title class_">Array</span>();</span><br><span class="line"></span><br><span class="line">&gt; <span class="keyword">let</span> a2 = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">10</span>);</span><br><span class="line"><span class="literal">undefined</span></span><br><span class="line">&gt; a2[<span class="number">0</span>]</span><br><span class="line"><span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line">&gt; <span class="keyword">let</span> a3 = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">10</span>, <span class="number">10</span>, <span class="string">&quot;test&quot;</span>);</span><br><span class="line">&gt; a3[<span class="number">0</span>]</span><br><span class="line"><span class="number">10</span></span><br><span class="line">&gt; a3[<span class="number">2</span>]</span><br><span class="line"><span class="string">&#x27;test&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="arrayof"><a class="markdownIt-Anchor" href="#arrayof"></a> Array.of()</h3>
<p>从上文对 Array 构造函数的讨论可以看出：</p>
<ul>
<li>当使用一个数值参数调用 Array 参数时，这个参数指定的是数组的长度</li>
<li>在使用一个以上的数值参数时，这些参数则会成为新数组的元素</li>
</ul>
<p>因此使用 Array() 构造函数无法创建只包含一个数值元素的数组。在 ES6 中，<code>Array.of()</code> 函数可以解决这个问题。这是个工厂方法，可以使用其参数值（无论多少个）作为数组元素来创建并返回新数组：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">let</span> a1 = <span class="title class_">Array</span>.<span class="title function_">of</span>()</span><br><span class="line">&gt; <span class="keyword">let</span> a2 = <span class="title class_">Array</span>.<span class="title function_">of</span>(<span class="number">1</span>)</span><br><span class="line">&gt; <span class="keyword">let</span> a3 = <span class="title class_">Array</span>.<span class="title function_">of</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">&gt; [a1.<span class="property">length</span>, a2.<span class="property">length</span>, a3.<span class="property">length</span>]</span><br><span class="line">[ <span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span> ]</span><br></pre></td></tr></table></figure>
<h3 id="arrayfrom"><a class="markdownIt-Anchor" href="#arrayfrom"></a> Array.from()</h3>
<p>Array.from() 是 ES6 新增的另一个工厂方法。这个方法期待一个可迭代对象或类数组对象作为其第一个参数，并返回包含该对象元素的新数组。如果传入可迭代对象，<code>Array.from(iterable)</code> 与使用扩展操作符 <code>[...iterable]</code> 一样。如下也可以快速创建数组副本：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> copy = <span class="title class_">Array</span>.<span class="title function_">from</span>(source)</span><br></pre></td></tr></table></figure>
<p>Array.from() 确实很重要，因为它定义了一种给类数组对象创建真正的数组副本的机制。</p>
<p>Array.from() 也接受可选的第二个参数。如果给第二个参数传入了一个函数，那么在构建新数组时，源对象的每个元素都会传入这个函数，这个函数的返回值将代替原始值成为新数组的元素（类似于数组的 map 方法，但是效率更高）。</p>
<h2 id="读写数组元素"><a class="markdownIt-Anchor" href="#读写数组元素"></a> 读写数组元素</h2>
<p>可以使用 <code>[​]</code> 操作符访问数组元素，方括号左侧应该是一个对数组的引用，方括号内应该是一个具有非负整数值的表达式。</p>
<p>数组特殊的地方在于，只要你使用小于 <code>2**32-1</code> 的非负整数作为属性名，数组就会自动为你维护 length 属性的值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">let</span> a = [<span class="number">1</span>]</span><br><span class="line">&gt; a[<span class="number">0</span>]</span><br><span class="line"><span class="number">1</span></span><br><span class="line">&gt; a[<span class="number">1</span>] = <span class="number">2</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line">&gt; a[<span class="number">2</span>] = <span class="number">3</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line">&gt; a.<span class="property">length</span></span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>
<p>数组是一种特殊的对象。用于访问数组元素的方括号与用于访问对象属性的方括号是类似的。<strong>JavaScript 会将数值索引转换为字符串，即索引 <code>1</code> 会变成字符串 <code>&quot;1&quot;</code>​，然后再将这个字符串作为属性名</strong>。这个从数值到字符串的转换没什么特别的，使用普通对象也一样：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">let</span> o = &#123;&#125;</span><br><span class="line">&gt; o[<span class="number">1</span>] = <span class="string">&quot;one&quot;</span></span><br><span class="line"><span class="string">&#x27;one&#x27;</span></span><br><span class="line">&gt; o[<span class="string">&quot;1&quot;</span>]</span><br><span class="line"><span class="string">&#x27;one&#x27;</span></span><br></pre></td></tr></table></figure>
<p>所有索引都是属性名，但只有介于 0 和 <code>2**32-2</code> 之间的整数属性名才是索引。<strong>所有数组都是对象，可以在数组上以任意名字创建属性。只不过，如果这个属性是数组索引，数组会有特殊的行为，即自动按需更新其 length 属性</strong>。</p>
<ul>
<li>可以使用负数或非整数值来索引数组。此时，数值会转换为字符串，而这个字符串会作为属性名</li>
<li>如果你碰巧使用了非负整数的字符串来索引数组，那这个值会成为数组索引，而不是对象属性。同样，如果使用了与整数相等的浮点值也是如此</li>
<li>由于数组索引其实就是一种特殊的对象属性，所以 JavaScript 数组没有所谓 <code>越界</code> 错误。查询任何对象中不存在的属性都不会导致错误，只会返回 undefined。数组作为一种特殊对象也是如此</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">let</span> a = []</span><br><span class="line">&gt; a[-<span class="number">1</span>] = <span class="number">1</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line">&gt; a[<span class="number">1</span>] = <span class="number">2</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line">&gt; a[<span class="number">2.00</span>] = <span class="number">2</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line">&gt; a.<span class="property">length</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line">&gt; a</span><br><span class="line">[ <span class="language-xml">&lt;1 empty item&gt;, 2, 2, &#x27;-1&#x27;: 1 ]</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">&gt; a[-1]</span></span><br><span class="line"><span class="language-xml">1</span></span><br><span class="line"><span class="language-xml">&gt; a[&quot;-1&quot;]</span></span><br><span class="line"><span class="language-xml">1</span></span><br><span class="line"><span class="language-xml">&gt; a[100]</span></span><br><span class="line"><span class="language-xml">undefined</span></span><br></pre></td></tr></table></figure>
<h2 id="稀疏数组"><a class="markdownIt-Anchor" href="#稀疏数组"></a> 稀疏数组</h2>
<p>稀疏数组是指数组元素索引并不是从 0 开始的连续值。正常情况下，数组的 length 属性表明数组中元素的个数。如果数组是稀疏的，则 length 属性的值会大于元素个数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">let</span> a = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">5</span>)</span><br><span class="line">&gt; a.<span class="property">length</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"></span><br><span class="line">&gt; a[<span class="number">1000</span>] = <span class="number">0</span>;</span><br><span class="line"><span class="number">0</span></span><br><span class="line">&gt; a.<span class="property">length</span></span><br><span class="line"><span class="number">1001</span></span><br></pre></td></tr></table></figure>
<p>如果省略数组字面量中的一个值​，也会得到稀疏数组，被省略的元素是不存在的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; a = [<span class="number">1</span>,,,,<span class="number">5</span>]</span><br><span class="line">[ <span class="number">1</span>, <span class="language-xml">&lt;3 empty items&gt;, 5 ]</span></span><br><span class="line"><span class="language-xml">&gt; a.length</span></span><br><span class="line"><span class="language-xml">5</span></span><br><span class="line"><span class="language-xml">&gt; 0 in a</span></span><br><span class="line"><span class="language-xml">true</span></span><br><span class="line"><span class="language-xml">&gt; 2 in a</span></span><br><span class="line"><span class="language-xml">false</span></span><br></pre></td></tr></table></figure>
<h2 id="数组的长度"><a class="markdownIt-Anchor" href="#数组的长度"></a> 数组的长度</h2>
<p>每个数组都有 length 属性，正是这个属性让数组有别于常规的 JavaScript 对象。</p>
<ul>
<li>对于非稀疏数组，length 属性就是数组中元素的个数。这个值比数组的最高索引大 1：</li>
<li>对于稀疏数组，length 属性会大于元素个数，也可以说稀疏数组的 length 值一定大于数组中任何元素的索引</li>
<li>因此，数组无论稀疏与否，其中任何元素的索引都不会大于或等于数组的 length</li>
</ul>
<p>为了维护这种行为：</p>
<ul>
<li>如果给一个索引为 i 的数组元素赋值，而 i 大于或等于数组当前的 length，则数组的 length 属性会被设置为 <code>i+1</code></li>
<li>如果将 length 属性设置为一个小于其当前值的非负整数 n，则任何索引大于或等于 n 的数组元素都会从数组中被删除：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&gt; a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">[ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> ]</span><br><span class="line">&gt; a.<span class="property">length</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line">&gt; a.<span class="property">length</span> = <span class="number">3</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line">&gt; a</span><br><span class="line">[ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> ]</span><br><span class="line">&gt; a.<span class="property">length</span> = <span class="number">1</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line">&gt; a</span><br><span class="line">[ <span class="number">1</span> ]</span><br><span class="line"></span><br><span class="line">&gt; a.<span class="property">length</span> = <span class="number">100</span></span><br><span class="line"><span class="number">100</span></span><br><span class="line">&gt; a</span><br><span class="line">[ <span class="number">1</span>, <span class="language-xml">&lt;99 empty items&gt; ]</span></span><br><span class="line"><span class="language-xml">&gt; a[2]</span></span><br><span class="line"><span class="language-xml">undefined</span></span><br></pre></td></tr></table></figure>
<p>也可以把数组的 length 属性设置为一个大于其当前值的值。这样做并不会向数组中添加新元素，只会在数组末尾创建一个稀疏的区域。</p>
<h2 id="添加和删除数组元素"><a class="markdownIt-Anchor" href="#添加和删除数组元素"></a> 添加和删除数组元素</h2>
<p>数组添加元素的最简单方式就是给它的一个新索引赋值，也可以使用 <code>push()</code> 方法在数组末尾添加一个或多个元素。向数组 <code>a</code> 中推入一个值等同于把这个值赋给 <code>a[a.length]​</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; a = []</span><br><span class="line">[]</span><br><span class="line">&gt; a.<span class="title function_">push</span>(<span class="string">&quot;test&quot;</span>)</span><br><span class="line">&gt; a.<span class="title function_">push</span>(<span class="string">&quot;test2&quot;</span>)</span><br><span class="line">&gt; a.<span class="property">length</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line">&gt; a</span><br><span class="line">[ <span class="string">&#x27;test&#x27;</span>, <span class="string">&#x27;test2&#x27;</span> ]</span><br></pre></td></tr></table></figure>
<ul>
<li><code>pop()</code> 方法删除数组最后一个元素并返回该元素，同时导致数组长度减 1</li>
<li><code>unshift()</code> 方法在数组开头插入值，它将已有的数组元素移动到更高索引位</li>
<li><code>shift()</code> 方法删除数组第一个元素并返回该元素，让数组长度减 1 并将所有元素移动到低一位的索引</li>
</ul>
<p>可以使用 delete 操作符删除数组元素：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">[ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> ]</span><br><span class="line">&gt; <span class="keyword">delete</span> a[<span class="number">0</span>]</span><br><span class="line"><span class="literal">true</span></span><br><span class="line">&gt; a</span><br><span class="line">[ <span class="language-xml">&lt;1 empty item&gt;, 2, 3 ]</span></span><br><span class="line"><span class="language-xml">&gt; a.length</span></span><br><span class="line"><span class="language-xml">3</span></span><br></pre></td></tr></table></figure>
<ul>
<li>删除数组元素类似于（但不完全等同于）给该元素赋 undefined 值</li>
<li>对数组元素使用 delete 操作符不会修改 length 属性，也不会把高索引位的元素向下移动来填充被删除属性的空隙</li>
<li>delete 从数组中删除元素后，数组会变稀疏</li>
</ul>
<p>之前说过，把数组 length 属性设置成一个新长度值，也可以从数组末尾删除元素。</p>
<p><code>splice()</code> 是一个可以插入、删除或替换数组元素的通用方法。这个方法修改 length 属性并按照需要向更高索引或更低索引移动数组元素。</p>
<h2 id="迭代数组"><a class="markdownIt-Anchor" href="#迭代数组"></a> 迭代数组</h2>
<p>到 ES6 为止，遍历一个数组（或任何可迭代对象）的最简单方式就是使用 <code>for/of</code> 循环：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">&gt; <span class="keyword">for</span> (<span class="keyword">let</span> v <span class="keyword">of</span> a) <span class="variable language_">console</span>.<span class="title function_">log</span>(v)</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>
<p><code>for/of</code> 循环使用的内置数组迭代器按照升序返回数组的元素。<strong>对于稀疏数组，这个循环没有特殊行为，凡是不存在的元素都返回 undefined</strong>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; a = []</span><br><span class="line">[]</span><br><span class="line">&gt; a[<span class="number">100</span>] = <span class="number">100</span></span><br><span class="line"><span class="number">100</span></span><br><span class="line">&gt; <span class="keyword">let</span> count = <span class="number">0</span></span><br><span class="line">&gt; <span class="keyword">for</span> (<span class="keyword">let</span> v <span class="keyword">of</span> a) count++</span><br><span class="line">&gt; count</span><br><span class="line"><span class="number">101</span></span><br></pre></td></tr></table></figure>
<ul>
<li>如果要对数组使用 <code>for/of</code> 循环，并且想知道每个数组元素的索引，可以使用数组的 entries() 方法和解构赋值。</li>
<li>另一种迭代数组的推荐方式是使用 <code>forEach()</code>。它并不是一种新的 for 循环，而是数组提供的一种用于自身迭代的函数式方法。需要给 forEach() 传一个函数，然后 forEach() 会用数组的每个元素调用一次这个函数。与 for/of循环不同，forEach()能够感知稀疏数组，不会对没有的元素数组调用函数。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">&gt; <span class="keyword">let</span> sum = <span class="number">0</span></span><br><span class="line">&gt; a.<span class="title function_">forEach</span>( <span class="function"><span class="params">v</span> =&gt;</span> &#123; sum += v; &#125;)</span><br><span class="line">&gt; sum</span><br><span class="line"><span class="number">6</span></span><br></pre></td></tr></table></figure>
<ul>
<li>使用老式的 for 循环也可以遍历数组。有时候为了提高性能，只会读取一次数组长度，而不是在每个迭代中都读取一次</li>
</ul>
<h2 id="多维数组"><a class="markdownIt-Anchor" href="#多维数组"></a> 多维数组</h2>
<p>JavaScript 通过数组的数组来模拟多维数组：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> table = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; table.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  table[i] = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">10</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> row = <span class="number">0</span>; row &lt; table.<span class="property">length</span>; row++) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> col = <span class="number">0</span>; col &lt; table[row].<span class="property">length</span>; col++) &#123;</span><br><span class="line">    table[row][col] = row * col;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(table[<span class="number">5</span>][<span class="number">7</span>]);</span><br></pre></td></tr></table></figure>
<h2 id="数组方法"><a class="markdownIt-Anchor" href="#数组方法"></a> 数组方法</h2>
<p>接下来介绍 Array 类定义的方法。</p>
<h3 id="数组迭代器方法"><a class="markdownIt-Anchor" href="#数组迭代器方法"></a> 数组迭代器方法</h3>
<p>数组迭代器方法用于迭代数组元素，它们会按照顺序把数组的每个元素传给我们提供的函数，可便于对数组进行迭代、映射、过滤、测试和归并。</p>
<ul>
<li>所有这些方法都接收一个函数作为第一个参数，并且对数组的每个元素（或某些元素）都调用一次这个函数</li>
<li>如果数组是稀疏的，则不会对不存在的数组元素调用传入的这个函数</li>
<li>多数情况下，我们提供的这个函数被调用时都会收到 3 个参数，分别是数组元素的值、数组元素的索引和数组本身</li>
<li>多数迭代器方法都接收可选的第二个参数。如果指定这个参数，则第一个函数在被调用时就好像它是第二个参数的方法一样。也就是说，传入的第二个参数会成为作为第一个参数传入的函数内部的 this 值</li>
</ul>
<p>forEach() 方法迭代数组的每个元素，并对每个元素都调用一次我们指定的函数：</p>
<ul>
<li>forEach() 在调用这个函数时会给它传 3 个参数：数组元素的值、数组元素的索引和数组本身</li>
<li>如果只关心数组元素的值，可以把函数写成只接收一个参数，即忽略其他参数</li>
<li>forEach() 并未提供一种提前终止迭代的方式</li>
</ul>
<p>map() 方法把调用它的数组的每个元素分别传给我们指定的函数，返回这个函数的返回值构成的数组。</p>
<ul>
<li>map() 返回一个新数组，并不修改调用它的数组</li>
<li>如果数组是稀疏的，则缺失元素不会调用我们的函数，但返回的数组也会与原始数组一样稀疏：长度相同，缺失的元素也相同</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">let</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">&gt; a.<span class="title function_">map</span>(<span class="function"><span class="params">x</span> =&gt;</span> x*<span class="number">2</span>)</span><br><span class="line">[ <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span> ]</span><br></pre></td></tr></table></figure>
<p>filter() 方法返回一个数组，该数组包含调用它的数组的子数组：</p>
<ul>
<li>传给这个方法的函数应该是个断言函数，即返回 true 或 false 的函数</li>
<li>如果函数返回 true 或返回的值转换为 true，则传给这个函数的元素就是 filter() 最终返回的子数组的成员</li>
<li>filter() 会跳过稀疏数组中缺失的元素，它返回的数组始终是稠密的。因此如下方法直接清理稀疏数组中的空隙：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> dense = sparse.<span class="title function_">filter</span>(<span class="function">() =&gt;</span> <span class="literal">true</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>如果想清理空隙，同时删除值为 null 或者 undeinfed 的元素，则可以这样：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = a.<span class="title function_">filter</span>(<span class="function"><span class="params">x</span> =&gt;</span> x != <span class="literal">null</span>&amp;&amp; x != <span class="literal">undefined</span>);</span><br></pre></td></tr></table></figure>
<p>find() 和 findIndex() 方法与 <code>filter()</code> 类似，表现在它们都遍历数组，寻找断言函数返回真值的元素。但是这两个方法会在断言函数找到第一个元素时停止迭代：</p>
<ul>
<li>find() 返回匹配的元素，findIndex()返回匹配元素的索引</li>
<li>如果没有找到匹配的元素，则 find() 返回 undefined，而 findIndex() 返回 -1</li>
</ul>
<p>every() 和 some() 方法是数组断言方法，即它们会对数组元素调用我们传入的断言函数，最后返回 true 或 false。</p>
<ul>
<li><code>every()</code> 方法当且仅当断言函数对数组的所有元素都返回 true 时才返回 true</li>
<li><code>Some()</code> 只要数组元素中有一个让断言函数返回 true 它就返回 true</li>
<li>every() 和 some() 都会已经知道最终结果的时候，停止迭代数组</li>
</ul>
<p>reduce() 和 reduceRight() 方法使用我们指定的函数归并数组元素，最终产生一个值。</p>
<ul>
<li>reduce() 接收两个参数。第一个参数是执行归并操作的函数。这个归并函数的任务就是把两个值归并或组合为一个值并返回这个值。第二个参数是可选的，是传给归并函数的初始值。</li>
<li>reduce 接受的函数参数，其第一个参数是目前为止归并操作的累计结果。在第一次调用时，它的值是 <code>reduce()</code> 方法的第二个参数（如果提供了的话）。如果 <code>reduce()</code> 没有提供第二个值，reduce() 会使用数组的第一个元素作为初始值，这意味着首次调用归并函数将以数组的第一和第二个元素作为其第一和第二个参数</li>
<li>值、索引和数组本身作为函数参数的第二、第三和第四个参数</li>
<li>如果不传初始值参数，在空数组上调用 reduce() 会导致 TypeError</li>
<li>如果调用它时只有一个值，比如用只包含一个元素的数组调用且不传初始值，或者用空数组调用但传了初始值，则 reduce() 直接返回这个值，不会调用归并函数</li>
<li>reduceRight() 与 reduce() 类似，只不过是从高索引向低索引（从右到左）处理数组</li>
<li>无论 reduce() 还是 reduceRight() 都不接收用于指定归并函数this值的可选参数。它们用可选的初始值参数取代了这个值</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; a.<span class="title function_">reduce</span>(<span class="function">(<span class="params">x, y</span>) =&gt;</span> x + y, <span class="number">0</span>)</span><br><span class="line"><span class="number">15</span></span><br><span class="line">&gt; a.<span class="title function_">reduce</span>(<span class="function">(<span class="params">x, y</span>) =&gt;</span> x * y, <span class="number">1</span>)</span><br><span class="line"><span class="number">120</span></span><br><span class="line">&gt; a.<span class="title function_">reduce</span>(<span class="function">(<span class="params">x, y</span>) =&gt;</span> x &gt; y? x : y)</span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure>
<h3 id="使用-flat-和-flatmap-打平数组"><a class="markdownIt-Anchor" href="#使用-flat-和-flatmap-打平数组"></a> 使用 flat() 和 flatMap() 打平数组</h3>
<p>flat() 方法用于创建并返回一个新数组，这个新数组包含与它调用 flat() 的数组相同的元素，只不过其中任何本身也是数组的元素会被 <code>打平</code> 填充到返回的数组中。</p>
<ul>
<li>在不传参调用时，flat() 会打平一级嵌套</li>
<li>如果想打平更多层级，需要给 flat() 传一个数值参数：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&gt; [<span class="number">1</span>, [<span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]].<span class="title function_">flat</span>()</span><br><span class="line">[ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span> ]</span><br><span class="line"></span><br><span class="line">&gt; b.<span class="title function_">flat</span>()</span><br><span class="line">[ <span class="number">1</span>, <span class="number">2</span>, [ <span class="number">3</span>, [ <span class="number">4</span> ] ] ]</span><br><span class="line">&gt; b.<span class="title function_">flat</span>(<span class="number">1</span>)</span><br><span class="line">[ <span class="number">1</span>, <span class="number">2</span>, [ <span class="number">3</span>, [ <span class="number">4</span> ] ] ]</span><br><span class="line">&gt; b.<span class="title function_">flat</span>(<span class="number">2</span>)</span><br><span class="line">[ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, [ <span class="number">4</span> ] ]</span><br><span class="line">&gt; b.<span class="title function_">flat</span>(<span class="number">3</span>)</span><br><span class="line">[ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span> ]</span><br><span class="line">&gt; b.<span class="title function_">flat</span>(<span class="number">4</span>)</span><br><span class="line">[ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span> ]</span><br></pre></td></tr></table></figure>
<p>flatMap() 方法与 map() 方法相似，只不过返回的数组会自动被打平，就像传给了 flat() 一样。因此 <code>a.flatMap(f)</code> 等同于 <code>a.map(f).flat()</code>，但是效率更高。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">let</span> phrases = [<span class="string">&quot;hello world&quot;</span>, <span class="string">&quot;the definitive guide&quot;</span>]</span><br><span class="line">&gt; <span class="keyword">let</span> w = phrases.<span class="title function_">flatMap</span>(<span class="function"><span class="params">phrase</span> =&gt;</span> phrase.<span class="title function_">split</span>(<span class="string">&quot; &quot;</span>))</span><br><span class="line">&gt; w</span><br><span class="line">[ <span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;world&#x27;</span>, <span class="string">&#x27;the&#x27;</span>, <span class="string">&#x27;definitive&#x27;</span>, <span class="string">&#x27;guide&#x27;</span> ]</span><br></pre></td></tr></table></figure>
<h3 id="使用-concat-添加数组"><a class="markdownIt-Anchor" href="#使用-concat-添加数组"></a> 使用 concat() 添加数组</h3>
<p><code>concat()</code> 方法创建并返回一个新数组，新数组包含调用 <code>concat()</code> 方法的数组的元素，以及传给 <code>concat()</code> 的参数。如果这些参数中有数组，则拼接的是它们的元素而非数组本身。但是 concat() 不会递归打平数组的数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">let</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">&gt; a.<span class="title function_">concat</span>([<span class="number">4</span>, <span class="number">5</span>])</span><br><span class="line">[ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> ]</span><br><span class="line">&gt; a.<span class="title function_">concat</span>([<span class="number">4</span>, <span class="number">5</span>], [<span class="number">6</span>, <span class="number">7</span>], [<span class="number">9</span>, [<span class="number">10</span>]])</span><br><span class="line">[</span><br><span class="line">  <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>,</span><br><span class="line">  <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>,</span><br><span class="line">  <span class="number">7</span>, <span class="number">9</span>, [ <span class="number">10</span> ]</span><br><span class="line">]</span><br><span class="line">&gt; a</span><br><span class="line">[ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> ]</span><br></pre></td></tr></table></figure>
<p>concat() 并不修改调用它的数组，concat() 会创建调用它的数组的副本，因此它的开销更大。</p>
<h3 id="通过-push-pop-shift-和-unshift-实现栈和队列操作"><a class="markdownIt-Anchor" href="#通过-push-pop-shift-和-unshift-实现栈和队列操作"></a> 通过 push()、pop()、shift() 和 unshift() 实现栈和队列操作</h3>
<p>push() 和 pop() 方法可以把数组作为栈来操作。</p>
<ul>
<li>push()方法用于在数组末尾添加一个或多个新元素，并返回数组的新长度</li>
<li>pop() 用于删除数组最后面的元素，减少数组长度，并返回删除的值</li>
<li>push()方法不会打平传入的数组，如果想把一个数组中的所有元素都推送到另一个数组中，可以使用扩展操作符</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">let</span> values = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">&gt; [].<span class="title function_">push</span>(...values)</span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>
<p>unshift() 和 shift() 方法与 push() 和 pop() 很类似，只不过它们是从数组开头而非末尾插入和删除元素。</p>
<ul>
<li>unshift() 用于在数组开头添加一个或多个元素，已有元素的索引会相应向更高索引移动，并返回数组的新长度</li>
<li>shift() 删除并返回数组的第一个元素，所有后续元素都会向下移动一个位置，以占据数组开头空出的位置</li>
</ul>
<p>需要额外注意，在给 unshift() 传多个参数时，这些参数会一次性插入数组。这意味着一次插入与多次插入之后的数组顺序不一样</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">let</span> a1 = []</span><br><span class="line">&gt; a1.<span class="title function_">unshift</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="number">3</span></span><br><span class="line">&gt; a1</span><br><span class="line">[ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> ]</span><br><span class="line">&gt; <span class="keyword">let</span> a2 = []</span><br><span class="line">&gt; a2.<span class="title function_">unshift</span>(<span class="number">1</span>)</span><br><span class="line">&gt; a2.<span class="title function_">unshift</span>(<span class="number">2</span>)</span><br><span class="line">&gt; a2.<span class="title function_">unshift</span>(<span class="number">3</span>)</span><br><span class="line">&gt; a2</span><br><span class="line">[ <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span> ]</span><br></pre></td></tr></table></figure>
<h3 id="使用-slice-splice-和-fill-和-copywithin"><a class="markdownIt-Anchor" href="#使用-slice-splice-和-fill-和-copywithin"></a> 使用 slice()、splice() 和 fill() 和 copyWithin()</h3>
<p>slice() 方法返回一个数组的切片（slice）或者子数组：</p>
<ul>
<li>这个方法接收两个参数，分别用于指定要返回切片的起止位置。</li>
<li>返回的数组包含第一个参数指定的元素，以及所有后续元素，直到（但不包含）第二个参数指定的元素</li>
<li>如果只指定一个参数，返回的数组将包含从该起点开始直到数组末尾的所有元素</li>
<li>如果任何一个参数是负值，则这个值相对于数组长度指定数组元素，因此 -1 指定数组的最后一个元素</li>
</ul>
<p>splice() 是一个对数组进行插入和删除的通用方法，splice() 会修改调用它的数组。</p>
<ul>
<li>splice()的第一个参数指定插入或删除操作的起点位置</li>
<li>第二个参数指定要从数组中删除（切割出来）的元素个数。如果省略第二个参数，从起点元素开始的所有数组元素都将被删除</li>
<li>splice() 返回被删除元素的数组，如果没有删除元素返回空数组</li>
<li>splice() 的前两个参数指定要删除哪些元素。这两个参数后面还可以跟任意多个参数，表示要在第一个参数指定的位置插入到数组中的元素。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">let</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">&gt; a.<span class="title function_">splice</span>(<span class="number">2</span>, <span class="number">1</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>)</span><br><span class="line">[ <span class="number">3</span> ]</span><br><span class="line">&gt; a</span><br><span class="line">[ <span class="number">1</span>, <span class="number">2</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="number">4</span>, <span class="number">5</span> ]</span><br></pre></td></tr></table></figure>
<p>fill() 方法将数组的元素或切片设置为指定的值。它会修改调用它的数组，也返回修改后的数组：</p>
<ul>
<li>fill()的第一个参数是要把数组元素设置成的值</li>
<li>可选的第二个参数指定起始索引，如果省略则从索引 0 开始填充</li>
<li>可选的第三个参数指定终止索引，到这个索引为止（但不包含）的数组元素会被填充</li>
<li>如果省略第三个参数，则从起始索引开始一直填充到数组末尾。</li>
<li>传入负值相对于数组末尾指定索引</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; a = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">100</span>)</span><br><span class="line">[ &lt;100 empty items&gt; ]</span><br><span class="line">&gt; a.fill(10, 0, 10)</span><br><span class="line">[ 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, &lt;90 empty items&gt; ]</span><br></pre></td></tr></table></figure>
<p>copyWithin() 把数组切片复制到数组中的新位置，它会就地修改数组并返回修改后的数组，但不会改变数组的长度：</p>
<ul>
<li>第一个参数指定要把第一个元素复制到的目的索引</li>
<li>第二个参数指定要复制的第一个元素的索引，如果省略，则默认为 0</li>
<li>第三个参数指定要复制的元素切片的终止索引。如果省略，则使用数组的长度</li>
<li>从起始索引到（但不包含）终止索引的元素会被复制</li>
<li>传入负值相对于数组末尾指定索引</li>
<li>即使来源和目标区域有重叠，复制也是正确的</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">[ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> ]</span><br><span class="line">&gt; a.<span class="title function_">copyWithin</span>(<span class="number">1</span>, -<span class="number">2</span>, -<span class="number">1</span>)</span><br><span class="line">[ <span class="number">1</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> ]</span><br></pre></td></tr></table></figure>
<h3 id="数组索引与排序方法"><a class="markdownIt-Anchor" href="#数组索引与排序方法"></a> 数组索引与排序方法</h3>
<p><code>indexOf()</code> 和 <code>lastIndexOf()</code> 从数组中搜索指定的值并返回第一个找到的元素的索引，如果没找到则返回 -1。</p>
<ul>
<li>indexOf() 从前到后搜索数组</li>
<li>而 lastIndexOf() 从后向前搜索数组</li>
<li>使用 === 操作符比较它们的参数和数组元素</li>
<li>indexOf() 和 lastIndexOf() 都接收第二个可选的参数，指定从哪个位置开始搜索。可以是负值</li>
</ul>
<p>ES2016 的 includes() 方法接收一个参数，如果数组包含该值则返回 true，否则返回 false</p>
<ul>
<li>相比于 <code>indexOf()</code> 的 <code>===</code> 判断，includes() 使用稍微不同的相等测试，它认为 NaN 与自身相等。这意味着 indexOf() 无法检测数组中的 NaN 值，但 includes() 可以</li>
</ul>
<p>sort() 对数组元素就地排序并返回排序后的数组：</p>
<ul>
<li>在不传参调用时，sort() 按字母顺序对数组元素排序（如有必要，临时把它们转换为字符串）。</li>
<li>如果数组包含未定义的元素，它们会被排到数组末尾</li>
<li>要对数组元素执行非字母顺序的排序，必须给 sort() 传一个比较函数作为参数</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; a = [<span class="number">22</span>, <span class="number">111</span>, <span class="number">3</span>]</span><br><span class="line">[ <span class="number">22</span>, <span class="number">111</span>, <span class="number">3</span> ]</span><br><span class="line">&gt; a.<span class="title function_">sort</span>()</span><br><span class="line">[ <span class="number">111</span>, <span class="number">22</span>, <span class="number">3</span> ]</span><br><span class="line">&gt; a.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b)</span><br><span class="line">[ <span class="number">3</span>, <span class="number">22</span>, <span class="number">111</span> ]</span><br><span class="line">&gt; a.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> b - a)</span><br><span class="line">[ <span class="number">111</span>, <span class="number">22</span>, <span class="number">3</span> ]</span><br></pre></td></tr></table></figure>
<p>reverse() 方法反转数组元素的顺序，并返回反序后的数组，这个反序是就地反序。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; a</span><br><span class="line">[ <span class="number">111</span>, <span class="number">22</span>, <span class="number">3</span> ]</span><br><span class="line">&gt; a.<span class="title function_">reverse</span>()</span><br><span class="line">[ <span class="number">3</span>, <span class="number">22</span>, <span class="number">111</span> ]</span><br></pre></td></tr></table></figure>
<h3 id="数组到字符串的转换"><a class="markdownIt-Anchor" href="#数组到字符串的转换"></a> 数组到字符串的转换</h3>
<p>Array 类定义了 3 个把数组转换为字符串的方法，通常可以用在记录日志或错误消息的时候。</p>
<ul>
<li>join() 方法把数组的所有元素转换为字符串，然后把它们拼接起来并返回结果字符串。可以指定一个可选的字符串参数，用于分隔结果字符串中的元素。默认为逗号</li>
<li>与任何 JavaScript 对象一样，数组也有 toString() 方法。对于数组而言，这个方法的逻辑与没有参数的 join() 方法一样</li>
<li>toLocaleString() 是 toString() 的本地化版本。它调用 toLocaleString() 方法将每个数组元素转换为字符串，然后再使用（实现定义的）当地分隔符字符串来拼接结果字符串</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; a.<span class="title function_">join</span>()</span><br><span class="line"><span class="string">&#x27;1,2,3&#x27;</span></span><br><span class="line">&gt; a.<span class="title function_">toString</span>()</span><br><span class="line"><span class="string">&#x27;1,2,3&#x27;</span></span><br><span class="line">&gt; a.<span class="title function_">toLocaleString</span>()</span><br><span class="line"><span class="string">&#x27;1,2,3&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="静态数组函数"><a class="markdownIt-Anchor" href="#静态数组函数"></a> 静态数组函数</h3>
<p>Array 类也定义了 3 个静态函数，包括之前介绍的 <code>Array.of()</code> 和 <code>Array.from()</code>，还有一个是 Array.isArray()，用于判断某个值师傅为数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="title class_">Array</span>.<span class="title function_">isArray</span>([])</span><br><span class="line"><span class="literal">true</span></span><br><span class="line">&gt; <span class="title class_">Array</span>.<span class="title function_">isArray</span>(&#123;&#125;)</span><br><span class="line"><span class="literal">false</span></span><br></pre></td></tr></table></figure>
<h2 id="类数组对象"><a class="markdownIt-Anchor" href="#类数组对象"></a> 类数组对象</h2>
<p>总结一下，JavaScript 数组具有一些其他对象不具备的特殊特性：</p>
<ul>
<li>数组的 length 属性会在新元素加入时自动更新</li>
<li>设置 length 为更小的值会截断数组</li>
<li>数组从 Array.prototype 继承有用的方法</li>
<li>Array.isArray() 对数组返回 true</li>
</ul>
<p>这些特性让 JavaScript 数组与常规对象有了明显区别。但是，这些特性并非定义数组的本质特性。<strong>事实上，只要对象有一个数值属性 length，而且有相应的非负整数属性，那就完全可以视同为数组</strong>。</p>
<p>实践当中，我们偶尔会碰到 <code>类数组</code> 对象。虽然不能直接在它们上面调用数组方法或期待 length 属性的特殊行为，但仍然可以通过写给真正数组的代码来遍历它们。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (i &lt; <span class="number">10</span>) &#123;</span><br><span class="line">  a[i] = i * i;</span><br><span class="line">  i++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">a.<span class="property">length</span> = i;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> total = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; a.<span class="property">length</span>; j++) &#123;</span><br><span class="line">  total += a[j];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(total); <span class="comment">// =&gt; 285</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>.<span class="title function_">isArray</span>(a)) <span class="comment">//=&gt; false</span></span><br></pre></td></tr></table></figure>
<p>这段代码为一个常规对象添加属性，让它成为一个类数组对象，然后再遍历得到的伪数组的 <code>元素</code>。</p>
<p>在客户端 JavaScript 中，很多操作 HTML 文档的方法（比如 <code>document.querySelectorAll()</code>）都返回类数组对象。</p>
<p>多数 JavaScript 数组方法有意地设计成了泛型方法，因此除了真正的数组，同样也可以用于类数组对象。但由于类数组对象不会继承 Array.prototype，所以无法直接在它们上面调用数组方法。为此，可以使用 <code>Function.call()</code> 方法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">let</span> a = &#123;<span class="string">&quot;0&quot;</span>:<span class="number">1</span>, <span class="string">&quot;1&quot;</span>:<span class="number">2</span>, <span class="string">&quot;2&quot;</span>:<span class="number">3</span>, <span class="attr">length</span>:<span class="number">3</span>&#125;</span><br><span class="line">&gt; <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">join</span>.<span class="title function_">call</span>(a, <span class="string">&quot;+&quot;</span>)</span><br><span class="line"><span class="string">&#x27;1+2+3&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 得到一个真正的数组</span></span><br><span class="line">&gt; <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">slice</span>.<span class="title function_">call</span>(a, <span class="number">0</span>)</span><br><span class="line">[ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> ]</span><br></pre></td></tr></table></figure>
<h2 id="作为数组的字符串"><a class="markdownIt-Anchor" href="#作为数组的字符串"></a> 作为数组的字符串</h2>
<p>JavaScript 字符串的行为类似于 UTF-16 Unicode 字符的只读数组。除了使用 <code>charAt()</code> 方法访问个别字符，还可以使用方括号语法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">let</span> s = <span class="string">&quot;test&quot;</span>;</span><br><span class="line">&gt; s.<span class="title function_">charAt</span>(<span class="number">0</span>)</span><br><span class="line"><span class="string">&#x27;t&#x27;</span></span><br><span class="line">&gt; s[<span class="number">0</span>]</span><br><span class="line"><span class="string">&#x27;t&#x27;</span></span><br></pre></td></tr></table></figure>
<p>字符串与数组的行为类似也意味着我们可以对字符串使用泛型的字符串方法，例如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">slice</span>.<span class="title function_">call</span>(<span class="string">&quot;test&quot;</span>, <span class="string">&quot; &quot;</span>)</span><br><span class="line">[ <span class="string">&#x27;t&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;s&#x27;</span>, <span class="string">&#x27;t&#x27;</span> ]</span><br></pre></td></tr></table></figure>
<p>一定要记住，字符串是不可修改的值，因此在把它们当成数组来使用时，它们是只读数组。像 push()、sort()、reverse() 和 splice() 这些就地修改数组的数组方法，对字符串都不起作用。但尝试用数组方法修改字符串并不会导致错误，只会静默失败（在 Node 中实际测试会失败）：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">push</span>.<span class="title function_">call</span>(<span class="string">&quot;test&quot;</span>, <span class="string">&quot; &quot;</span>)</span><br><span class="line"><span class="title class_">Uncaught</span>:</span><br><span class="line"><span class="title class_">TypeError</span>: <span class="title class_">Cannot</span> assign to read only property <span class="string">&#x27;length&#x27;</span> <span class="keyword">of</span> object <span class="string">&#x27;[object String]&#x27;</span></span><br><span class="line">    at <span class="title class_">String</span>.<span class="property">push</span> (&lt;anonymous&gt;)</span><br></pre></td></tr></table></figure>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/fuchencong.github.io/tags/%E5%89%8D%E7%AB%AF/" rel="tag"># 前端</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/fuchencong.github.io/2025/01/15/javascript-guide-08/" rel="prev" title="JavaScript 权威指南 08：函数">
      <i class="fa fa-chevron-left"></i> JavaScript 权威指南 08：函数
    </a></div>
      <div class="post-nav-item">
    <a href="/fuchencong.github.io/2025/01/13/javascript-guide-06/" rel="next" title="JavaScript 权威指南 06：对象">
      JavaScript 权威指南 06：对象 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#javascript-%E6%95%B0%E7%BB%84%E7%AE%80%E4%BB%8B"><span class="nav-number">1.</span> <span class="nav-text"> JavaScript 数组简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E7%BB%84"><span class="nav-number">2.</span> <span class="nav-text"> 创建数组</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E7%BB%84%E5%AD%97%E9%9D%A2%E9%87%8F"><span class="nav-number">2.1.</span> <span class="nav-text"> 数组字面量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%A9%E5%B1%95%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="nav-number">2.2.</span> <span class="nav-text"> 扩展操作符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#array-%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="nav-number">2.3.</span> <span class="nav-text"> Array 构造函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#arrayof"><span class="nav-number">2.4.</span> <span class="nav-text"> Array.of()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#arrayfrom"><span class="nav-number">2.5.</span> <span class="nav-text"> Array.from()</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%BB%E5%86%99%E6%95%B0%E7%BB%84%E5%85%83%E7%B4%A0"><span class="nav-number">3.</span> <span class="nav-text"> 读写数组元素</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A8%80%E7%96%8F%E6%95%B0%E7%BB%84"><span class="nav-number">4.</span> <span class="nav-text"> 稀疏数组</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E7%BB%84%E7%9A%84%E9%95%BF%E5%BA%A6"><span class="nav-number">5.</span> <span class="nav-text"> 数组的长度</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E5%92%8C%E5%88%A0%E9%99%A4%E6%95%B0%E7%BB%84%E5%85%83%E7%B4%A0"><span class="nav-number">6.</span> <span class="nav-text"> 添加和删除数组元素</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%AD%E4%BB%A3%E6%95%B0%E7%BB%84"><span class="nav-number">7.</span> <span class="nav-text"> 迭代数组</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%9A%E7%BB%B4%E6%95%B0%E7%BB%84"><span class="nav-number">8.</span> <span class="nav-text"> 多维数组</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E7%BB%84%E6%96%B9%E6%B3%95"><span class="nav-number">9.</span> <span class="nav-text"> 数组方法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E7%BB%84%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%96%B9%E6%B3%95"><span class="nav-number">9.1.</span> <span class="nav-text"> 数组迭代器方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-flat-%E5%92%8C-flatmap-%E6%89%93%E5%B9%B3%E6%95%B0%E7%BB%84"><span class="nav-number">9.2.</span> <span class="nav-text"> 使用 flat() 和 flatMap() 打平数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-concat-%E6%B7%BB%E5%8A%A0%E6%95%B0%E7%BB%84"><span class="nav-number">9.3.</span> <span class="nav-text"> 使用 concat() 添加数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E8%BF%87-push-pop-shift-%E5%92%8C-unshift-%E5%AE%9E%E7%8E%B0%E6%A0%88%E5%92%8C%E9%98%9F%E5%88%97%E6%93%8D%E4%BD%9C"><span class="nav-number">9.4.</span> <span class="nav-text"> 通过 push()、pop()、shift() 和 unshift() 实现栈和队列操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-slice-splice-%E5%92%8C-fill-%E5%92%8C-copywithin"><span class="nav-number">9.5.</span> <span class="nav-text"> 使用 slice()、splice() 和 fill() 和 copyWithin()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E7%BB%84%E7%B4%A2%E5%BC%95%E4%B8%8E%E6%8E%92%E5%BA%8F%E6%96%B9%E6%B3%95"><span class="nav-number">9.6.</span> <span class="nav-text"> 数组索引与排序方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E7%BB%84%E5%88%B0%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E8%BD%AC%E6%8D%A2"><span class="nav-number">9.7.</span> <span class="nav-text"> 数组到字符串的转换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9D%99%E6%80%81%E6%95%B0%E7%BB%84%E5%87%BD%E6%95%B0"><span class="nav-number">9.8.</span> <span class="nav-text"> 静态数组函数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B1%BB%E6%95%B0%E7%BB%84%E5%AF%B9%E8%B1%A1"><span class="nav-number">10.</span> <span class="nav-text"> 类数组对象</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%9C%E4%B8%BA%E6%95%B0%E7%BB%84%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-number">11.</span> <span class="nav-text"> 作为数组的字符串</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="fuchencong"
      src="/fuchencong.github.io/images/logo.jpeg">
  <p class="site-author-name" itemprop="name">fuchencong</p>
  <div class="site-description" itemprop="description">Having dreams is what makes life tolerable.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/fuchencong.github.io/archives/">
        
          <span class="site-state-item-count">198</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/fuchencong.github.io/categories/">
          
        <span class="site-state-item-count">17</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/fuchencong.github.io/tags/">
          
        <span class="site-state-item-count">34</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/fuchencong" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;fuchencong" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:fuchencong@163.com" title="E-Mail → mailto:fuchencong@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">fuchencong</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/fuchencong.github.io/lib/anime.min.js"></script>
  <script src="/fuchencong.github.io/lib/velocity/velocity.min.js"></script>
  <script src="/fuchencong.github.io/lib/velocity/velocity.ui.min.js"></script>

<script src="/fuchencong.github.io/js/utils.js"></script>

<script src="/fuchencong.github.io/js/motion.js"></script>


<script src="/fuchencong.github.io/js/schemes/muse.js"></script>


<script src="/fuchencong.github.io/js/next-boot.js"></script>




  















  

  
      
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex@0/dist/katex.min.css">


  

</body>
</html>
