<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/fuchencong.github.io/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/fuchencong.github.io/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/fuchencong.github.io/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/fuchencong.github.io/images/logo.svg" color="#222">

<link rel="stylesheet" href="/fuchencong.github.io/css/main.css">


<link rel="stylesheet" href="/fuchencong.github.io/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"fuchencong.github.io","root":"/fuchencong.github.io/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="åœ¨ Geminiã€DeepSeek çš„å¸®åŠ©ä¸‹ï¼Œæ„å»ºäº†ä¸€ä¸ªç®€å•çš„ Next.js é¡¹ç›®ï¼Œç”¨æ¥è¿½è¸ª Next.js çš„æœåŠ¡ç«¯æ¸²æŸ“å’Œå®¢æˆ·ç«¯æ¸²æŸ“æµç¨‹ï¼Œä»è€ŒåŠ æ·±å¯¹ Next.js æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆServer-Side Renderingï¼ŒSSRï¼‰æµç¨‹çš„ç†è§£ï¼Œä¹Ÿè¿›ä¸€æ­¥å­¦ä¹ æŒæ¡å®¢æˆ·ç«¯æ¸²æŸ“ä¸æœåŠ¡ç«¯æ¸²æŸ“çš„åŒºåˆ«ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="Next.js æ¸²æŸ“æµç¨‹è¿½è¸ª">
<meta property="og:url" content="https://fuchencong.github.io/fuchencong.github.io/2026/01/08/nextjs-render-trace/index.html">
<meta property="og:site_name" content="fuchencong">
<meta property="og:description" content="åœ¨ Geminiã€DeepSeek çš„å¸®åŠ©ä¸‹ï¼Œæ„å»ºäº†ä¸€ä¸ªç®€å•çš„ Next.js é¡¹ç›®ï¼Œç”¨æ¥è¿½è¸ª Next.js çš„æœåŠ¡ç«¯æ¸²æŸ“å’Œå®¢æˆ·ç«¯æ¸²æŸ“æµç¨‹ï¼Œä»è€ŒåŠ æ·±å¯¹ Next.js æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆServer-Side Renderingï¼ŒSSRï¼‰æµç¨‹çš„ç†è§£ï¼Œä¹Ÿè¿›ä¸€æ­¥å­¦ä¹ æŒæ¡å®¢æˆ·ç«¯æ¸²æŸ“ä¸æœåŠ¡ç«¯æ¸²æŸ“çš„åŒºåˆ«ã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://fuchencong.github.io/fuchencong.github.io/2026/01/08/nextjs-render-trace/images/01.jpg">
<meta property="og:image" content="https://fuchencong.github.io/fuchencong.github.io/2026/01/08/nextjs-render-trace/images/02.jpg">
<meta property="og:image" content="https://fuchencong.github.io/fuchencong.github.io/2026/01/08/nextjs-render-trace/images/07.png">
<meta property="og:image" content="https://fuchencong.github.io/fuchencong.github.io/2026/01/08/nextjs-render-trace/images/03.jpg">
<meta property="og:image" content="https://fuchencong.github.io/fuchencong.github.io/2026/01/08/nextjs-render-trace/images/04.jpg">
<meta property="og:image" content="https://fuchencong.github.io/fuchencong.github.io/2026/01/08/nextjs-render-trace/images/08.png">
<meta property="og:image" content="https://fuchencong.github.io/fuchencong.github.io/2026/01/08/nextjs-render-trace/images/05.jpg">
<meta property="og:image" content="https://fuchencong.github.io/fuchencong.github.io/2026/01/08/nextjs-render-trace/images/06.jpg">
<meta property="article:published_time" content="2026-01-08T04:16:31.000Z">
<meta property="article:modified_time" content="2026-01-08T06:34:28.462Z">
<meta property="article:author" content="fuchencong">
<meta property="article:tag" content="å‰ç«¯">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://fuchencong.github.io/fuchencong.github.io/2026/01/08/nextjs-render-trace/images/01.jpg">

<link rel="canonical" href="https://fuchencong.github.io/fuchencong.github.io/2026/01/08/nextjs-render-trace/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Next.js æ¸²æŸ“æµç¨‹è¿½è¸ª | fuchencong</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/fuchencong.github.io/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">fuchencong</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">The way I am</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/fuchencong.github.io/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/fuchencong.github.io/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/fuchencong.github.io/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/fuchencong.github.io/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/fuchencong.github.io/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://fuchencong.github.io/fuchencong.github.io/2026/01/08/nextjs-render-trace/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/fuchencong.github.io/images/logo.jpeg">
      <meta itemprop="name" content="fuchencong">
      <meta itemprop="description" content="Having dreams is what makes life tolerable.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="fuchencong">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Next.js æ¸²æŸ“æµç¨‹è¿½è¸ª
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2026-01-08 12:16:31" itemprop="dateCreated datePublished" datetime="2026-01-08T12:16:31+08:00">2026-01-08</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/fuchencong.github.io/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">å‰ç«¯</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>åœ¨ Geminiã€DeepSeek çš„å¸®åŠ©ä¸‹ï¼Œæ„å»ºäº†ä¸€ä¸ªç®€å•çš„ Next.js é¡¹ç›®ï¼Œç”¨æ¥è¿½è¸ª Next.js çš„æœåŠ¡ç«¯æ¸²æŸ“å’Œå®¢æˆ·ç«¯æ¸²æŸ“æµç¨‹ï¼Œä»è€ŒåŠ æ·±å¯¹ Next.js æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆServer-Side Renderingï¼ŒSSRï¼‰æµç¨‹çš„ç†è§£ï¼Œä¹Ÿè¿›ä¸€æ­¥å­¦ä¹ æŒæ¡å®¢æˆ·ç«¯æ¸²æŸ“ä¸æœåŠ¡ç«¯æ¸²æŸ“çš„åŒºåˆ«ã€‚</p>
<span id="more"></span>
<h2 id="é¡¹ç›®ç»“æ„"><a class="markdownIt-Anchor" href="#é¡¹ç›®ç»“æ„"></a> é¡¹ç›®ç»“æ„</h2>
<p>è¿™ä¸ªé¡¹ç›®è®¾è®¡äº†ä¸¤ä¸ªå¯¹æ¯”é¡µé¢ï¼Œåˆ†åˆ«å±•ç¤ºä¸åŒçš„æ¸²æŸ“ç­–ç•¥ï¼š</p>
<ul>
<li>
<p>SSR é¡µé¢ (app/ssr-page/page.tsx)</p>
<ul>
<li>æœåŠ¡å™¨ç»„ä»¶ï¼Œåœ¨ Node.js ç¯å¢ƒæ‰§è¡Œ</li>
<li>æ•°æ®è¯·æ±‚ä» Node æœåŠ¡å‘å‡º</li>
<li>åœ¨è¯¥é¡µé¢ä¸­ï¼Œä¹ŸåŒ…å«ä¸€ä¸ª <code>å®¢æˆ·ç«¯ç»„ä»¶</code>ï¼Œç”¨æ¥åŠ å¼ºå¯¹æ¯”</li>
</ul>
</li>
<li>
<p>CSR é¡µé¢ (app/csr-page/page.tsx)</p>
<ul>
<li>åªåŒ…å« <code>å®¢æˆ·ç«¯ç»„ä»¶</code></li>
<li>æµè§ˆå™¨è§¦å‘æ•°æ®çš„å¼‚æ­¥è·å–</li>
</ul>
</li>
<li>
<p>å…±äº«çš„ <code>å®¢æˆ·ç«¯ç»„ä»¶</code> (app/csr-page/client-component.tsx)</p>
<ul>
<li>ä½¿ç”¨ <code>use client</code> æ ‡è®°ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯ç»„ä»¶ï¼ˆClient Componentï¼‰</li>
<li>åŒ…å« <code>useEffect</code> è¿›è¡Œæ•°æ®è·å–</li>
</ul>
</li>
<li>
<p>Python API æœåŠ¡</p>
<ul>
<li>ç”¨ FastAPI æ­å»ºä¸€ä¸ªç®€å•çš„ API æœåŠ¡ï¼Œç”¨æ¥æ¨¡å‹åç«¯æœåŠ¡ï¼ˆæˆ–è€…è¯´çœŸæ­£æ„ä¹‰ä¸Šçš„åç«¯æœåŠ¡ï¼‰</li>
<li>æä¾›éšæœºæ•°ç”Ÿæˆ API</li>
</ul>
</li>
</ul>
<h3 id="åˆ›å»ºé¡¹ç›®"><a class="markdownIt-Anchor" href="#åˆ›å»ºé¡¹ç›®"></a> åˆ›å»ºé¡¹ç›®</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cd /root/code/private/web/learn/nextjs</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># npx create-next-app@latest fullstack-demo</span></span><br><span class="line"><span class="comment"># cd fullstack-demo</span></span><br></pre></td></tr></table></figure>
<h3 id="appssr-pagepagetsx"><a class="markdownIt-Anchor" href="#appssr-pagepagetsx"></a> <code>app/ssr-page/page.tsx</code></h3>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">ClientComponent</span> <span class="keyword">from</span> <span class="string">&#x27;../csr-page/client-component&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™æ˜¯ä¸€ä¸ªé»˜è®¤çš„æœåŠ¡å™¨ç»„ä»¶ï¼Œä»£ç åœ¨ Node.js ç¯å¢ƒæ‰§è¡Œ</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getSSRData</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// âš ï¸ æ³¨æ„ï¼šè¿™é‡Œä½¿ç”¨ Node.js çš„ fetchï¼Œç›´æ¥åœ¨æœåŠ¡å™¨å†…éƒ¨å‘é€è¯·æ±‚</span></span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;http://localhost:8000/api/random-number&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">cache</span>: <span class="string">&#x27;no-store&#x27;</span> <span class="comment">// ç¡®ä¿æ¯æ¬¡è¯·æ±‚éƒ½é‡æ–°è·å–æ•°æ®</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!res.<span class="property">ok</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;Failed to fetch SSR data from Python API&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> res.<span class="title function_">json</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">SSRPage</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> data = <span class="keyword">await</span> <span class="title function_">getSSRData</span>(); <span class="comment">// é˜»å¡æ¸²æŸ“ï¼Œç›´åˆ°æ•°æ®è·å–å®Œæˆ</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">padding:</span> &#x27;<span class="attr">20px</span>&#x27;, <span class="attr">border:</span> &#x27;<span class="attr">1px</span> <span class="attr">solid</span> <span class="attr">blue</span>&#x27; &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>SSR é¡µé¢ (æœåŠ¡ç«¯æ¸²æŸ“)<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">strong</span>&gt;</span>æ•°æ®æµï¼š<span class="tag">&lt;/<span class="name">strong</span>&gt;</span> Node.js æœåŠ¡å™¨ **ç›´æ¥** è°ƒç”¨ Python APIã€‚</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>æ¸²æŸ“ç»“æœï¼š<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>æ¥æº: &#123;data.source&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>éšæœºæ•°: **&#123;data.value&#125;**<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>æ—¶é—´æˆ³: &#123;data.timestamp&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      &#123;/* è¿™æ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯ç»„ä»¶ï¼Œä½†å®ƒçš„åˆå§‹ HTML ä»ç„¶æ˜¯åœ¨ Node.js ç”Ÿæˆçš„ */&#125;</span></span><br><span class="line"><span class="language-xml">      &#123;/* è¿™é‡Œçš„ ClientComponent ä»…ç”¨äºæ¼”ç¤º Server Component å¯ä»¥åŒ…è£¹ Client Component */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ClientComponent</span> <span class="attr">title</span>=<span class="string">&quot;å®¢æˆ·ç«¯ç»„ä»¶&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="appcsr-pagepagetsx"><a class="markdownIt-Anchor" href="#appcsr-pagepagetsx"></a> <code>app/csr-page/page.tsx</code></h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// è¿™ä¸ªæ–‡ä»¶å®šä¹‰äº†é¡µé¢çš„è·¯ç”±ï¼Œä½†ä¸»ä½“å†…å®¹ç”±å®¢æˆ·ç«¯ç»„ä»¶æ¸²æŸ“</span><br><span class="line"><span class="keyword">import</span> ClientComponent <span class="keyword">from</span> <span class="string">&#x27;./client-component&#x27;</span>;</span><br><span class="line"></span><br><span class="line">export default function CSRPage() &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div style=&#123;&#123; padding: <span class="string">&#x27;20px&#x27;</span>, border: <span class="string">&#x27;1px solid green&#x27;</span> &#125;&#125;&gt;</span><br><span class="line">      &lt;h1&gt;CSR é¡µé¢ (å®¢æˆ·ç«¯æ¸²æŸ“)&lt;/h1&gt;</span><br><span class="line">      &lt;p&gt;</span><br><span class="line">        &lt;strong&gt;æ•°æ®æµï¼š&lt;/strong&gt; æµè§ˆå™¨åœ¨ç»„ä»¶åŠ è½½å **å¼‚æ­¥** è°ƒç”¨ Python APIã€‚</span><br><span class="line">      &lt;/p&gt;</span><br><span class="line">      &lt;ClientComponent title=<span class="string">&quot;å®¢æˆ·ç«¯ç»„ä»¶&quot;</span> /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="appcsr-pageclient-componenttsx"><a class="markdownIt-Anchor" href="#appcsr-pageclient-componenttsx"></a> <code>app/csr-page/client-component.tsx</code></h3>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;use client&#x27;</span>; <span class="comment">// ğŸ‘ˆ æ ‡è®°ä¸ºå®¢æˆ·ç«¯ç»„ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™æ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯ç»„ä»¶ï¼Œå¯ä»¥åœ¨æµè§ˆå™¨ä¸Šä½¿ç”¨ Hooks</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ClientComponent</span>(<span class="params">&#123; title &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [data, setData] = <span class="title function_">useState</span>(<span class="literal">null</span>);</span><br><span class="line">  <span class="keyword">const</span> [loading, setLoading] = <span class="title function_">useState</span>(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 1. useEffect åœ¨ç»„ä»¶æŒ‚è½½ï¼ˆåœ¨æµè§ˆå™¨ä¸Šï¼‰åè¿è¡Œ</span></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getCSRData</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">// 2. âš ï¸ æµè§ˆå™¨å‘èµ· HTTP è¯·æ±‚åˆ° Python API</span></span><br><span class="line">      <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;http://localhost:8000/api/random-number&#x27;</span>);</span><br><span class="line">      <span class="keyword">const</span> json = <span class="keyword">await</span> res.<span class="title function_">json</span>();</span><br><span class="line"></span><br><span class="line">      <span class="title function_">setData</span>(json);</span><br><span class="line">      <span class="title function_">setLoading</span>(<span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">getCSRData</span>();</span><br><span class="line">  &#125;, []); <span class="comment">// ä¾èµ–æ•°ç»„ä¸ºç©ºï¼Œåªåœ¨ç»„ä»¶é¦–æ¬¡åŠ è½½æ—¶è¿è¡Œä¸€æ¬¡</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">marginTop:</span> &#x27;<span class="attr">20px</span>&#x27;, <span class="attr">borderTop:</span> &#x27;<span class="attr">1px</span> <span class="attr">dashed</span> #<span class="attr">ccc</span>&#x27;, <span class="attr">paddingTop:</span> &#x27;<span class="attr">10px</span>&#x27; &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;title&#125; è·å–æ•°æ®:<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;loading ? (</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>åŠ è½½ä¸­...<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      ) : (</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>æ¥æº: &#123;data.source&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>éšæœºæ•°: **&#123;data.value&#125;**<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>æ—¶é—´æˆ³: &#123;data.timestamp&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">color:</span> &#x27;<span class="attr">green</span>&#x27; &#125;&#125;&gt;</span>**æ­¤æ•°æ®åœ¨æµè§ˆå™¨ä¸Šè·å–å¹¶æ¸²æŸ“ã€‚**<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">      )&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">ClientComponent</span>;</span><br></pre></td></tr></table></figure>
<h3 id="python-api-æœåŠ¡"><a class="markdownIt-Anchor" href="#python-api-æœåŠ¡"></a> <code>python API æœåŠ¡</code></h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> FastAPI</span><br><span class="line"><span class="keyword">from</span> fastapi.middleware.cors <span class="keyword">import</span> CORSMiddleware</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line">app = FastAPI()</span><br><span class="line"></span><br><span class="line"><span class="comment"># âš ï¸ å¿…é¡»è®¾ç½® CORSï¼Œå¦åˆ™æµè§ˆå™¨ä¼šé˜»æ­¢è·¨åŸŸè¯·æ±‚</span></span><br><span class="line">app.add_middleware(</span><br><span class="line">    CORSMiddleware,</span><br><span class="line">    allow_origins=[<span class="string">&quot;*&quot;</span>], <span class="comment"># å…è®¸æ‰€æœ‰æ¥æºè®¿é—®ï¼Œå®é™…é¡¹ç›®ä¸­åº”é™åˆ¶ä¸º Next.js åŸŸå</span></span><br><span class="line">    allow_methods=[<span class="string">&quot;*&quot;</span>],</span><br><span class="line">    allow_headers=[<span class="string">&quot;*&quot;</span>],</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/api/random-number&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_random_number</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;è¿”å›ä¸€ä¸ªéšæœºæ•°å’ŒæœåŠ¡å™¨æ—¶é—´&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="string">&quot;source&quot;</span>: <span class="string">&quot;Python FastAPI Server&quot;</span>,</span><br><span class="line">        <span class="string">&quot;value&quot;</span>: random.randint(<span class="number">100</span>, <span class="number">999</span>),</span><br><span class="line">        <span class="string">&quot;timestamp&quot;</span>: <span class="string">&quot;Server Time: 2026-01-07 10:39:26 KST&quot;</span> <span class="comment"># ç¤ºä¾‹æ—¶é—´</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="å¯åŠ¨æœåŠ¡"><a class="markdownIt-Anchor" href="#å¯åŠ¨æœåŠ¡"></a> å¯åŠ¨æœåŠ¡</h3>
<p>åœ¨æˆ‘çš„ Linux æœåŠ¡å™¨ï¼ˆ10.9.33.133ï¼‰ä¸Šåˆ†åˆ«å¯åŠ¨å¦‚ä¸‹æœåŠ¡ï¼š</p>
<ul>
<li>å¯åŠ¨ <code>Next</code> æœåŠ¡ï¼šæœ¬è´¨ä¸Šæ˜¯å¯åŠ¨ä¸€ä¸ª Node.js æœåŠ¡ï¼ŒåŠ è½½ Next.js æ¡†æ¶åŠåº”ç”¨ç¨‹åºä»£ç </li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run dev</span><br></pre></td></tr></table></figure>
<ul>
<li>å¯åŠ¨ python æœåŠ¡</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># uvicorn main:app --reload --port 8000</span></span><br></pre></td></tr></table></figure>
<h2 id="è®¿é—®-ssr-page"><a class="markdownIt-Anchor" href="#è®¿é—®-ssr-page"></a> è®¿é—® <code>ssr-page</code></h2>
<h3 id="ç°è±¡"><a class="markdownIt-Anchor" href="#ç°è±¡"></a> ç°è±¡</h3>
<p>åœ¨æµè§ˆå™¨ä¸­è®¿é—® <code>http://10.9.33.133:3002/ssr-page</code></p>
<ul>
<li>Next æœåŠ¡æ—¥å¿—</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /ssr-page 200 <span class="keyword">in</span> 39ms (compile: 1875Âµs, render: 37ms)</span><br></pre></td></tr></table></figure>
<ul>
<li>Python æœåŠ¡æ—¥å¿—</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INFO:     127.0.0.1:33324 - &quot;GET /api/random-number HTTP/1.1&quot; 200 OK</span><br><span class="line">INFO:     127.0.0.1:33326 - &quot;GET /api/random-number HTTP/1.1&quot; 200 OK</span><br></pre></td></tr></table></figure>
<ul>
<li>åœ¨ Chrome çš„å¼€å‘æ”»å‡»ä¸­ï¼Œå¯ä»¥çœ‹åˆ° SSR é¡µé¢çš„è¿”å›ç»“æœ</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">......</span><br><span class="line"> <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;padding:20px;border:1px solid blue&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>SSR é¡µé¢ (æœåŠ¡ç«¯æ¸²æŸ“)<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">strong</span>&gt;</span>æ•°æ®æµï¼š<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">        Node.js æœåŠ¡å™¨ **ç›´æ¥** è°ƒç”¨ Python APIã€‚</span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>æ¸²æŸ“ç»“æœï¼š<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>æ¥æº:</span><br><span class="line">    <span class="comment">&lt;!-- --&gt;</span></span><br><span class="line">    Python FastAPI Server<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>éšæœºæ•°: **</span><br><span class="line">    <span class="comment">&lt;!-- --&gt;</span></span><br><span class="line">    464</span><br><span class="line">    <span class="comment">&lt;!-- --&gt;</span></span><br><span class="line">    **<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>æ—¶é—´æˆ³:</span><br><span class="line">    <span class="comment">&lt;!-- --&gt;</span></span><br><span class="line">    Server Time: 2026-01-07 10:39:26 KST<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-top:20px;border-top:1px dashed #ccc;padding-top:10px&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>å®¢æˆ·ç«¯ç»„ä»¶</span><br><span class="line">        <span class="comment">&lt;!-- --&gt;</span></span><br><span class="line">        è·å–æ•°æ®:<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>åŠ è½½ä¸­...<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<h3 id="ç»“æœåˆ†æ"><a class="markdownIt-Anchor" href="#ç»“æœåˆ†æ"></a> ç»“æœåˆ†æ</h3>
<p>åœ¨ <code>Next.js</code> çš„ <code>App Router</code> ä¸­ï¼Œé»˜è®¤çš„ <code>page.tsx</code> æ˜¯ <code>Server Component</code>ã€‚å½“å®ƒåŒ…å«ä¸€ä¸ª <code>Client Component</code> æ—¶ï¼Œä¼šå‘ç”Ÿä»¥ä¸‹æµç¨‹ï¼š</p>
<p><strong>é˜¶æ®µä¸€ï¼šNode.js æœåŠ¡å™¨å¤„ç† SSR (ä»…æ¸²æŸ“ç»“æ„)</strong></p>
<ul>
<li>æœåŠ¡å™¨ç»„ä»¶è¿è¡Œ <code>ssr-page/page.tsx</code>ï¼š Node.js æœåŠ¡å™¨å¼€å§‹æ‰§è¡Œ <code>SSRPage</code> å‡½æ•°</li>
<li>æœåŠ¡å™¨è·å–æ•°æ®ï¼š <code>SSRPage</code> å†…éƒ¨çš„ <code>getSSRData()</code> å‡½æ•°ç›´æ¥å‘ Python API å‘èµ·è¯·æ±‚ï¼Œè·å– SSR é¡µé¢æœ¬èº«æ‰€éœ€çš„æ•°æ®</li>
<li>é‡åˆ° <code>Client Component</code>ï¼ˆ<code>&lt;ClientComponent&gt;</code>ï¼‰ï¼šå½“æœåŠ¡å™¨é‡åˆ°ä¸€ä¸ªæ ‡è®°äº† <code>use client</code> çš„ç»„ä»¶æ—¶ï¼Œå®ƒä¸ä¼šæ‰§è¡Œè¿™ä¸ªç»„ä»¶å†…éƒ¨çš„æŸäº› JavaScript é€»è¾‘ï¼ˆå¦‚ useState æˆ– useEffectï¼‰
<ul>
<li>è·³è¿‡é€»è¾‘ï¼Œç”Ÿæˆå ä½ç¬¦ï¼š æœåŠ¡å™¨ä¼šè·³è¿‡ <code>ClientComponent</code> çš„æ‰€æœ‰ Hooks å’Œäº‹ä»¶å¤„ç†å‡½æ•°ï¼Œåªæ‰§è¡Œå®ƒçš„ return è¯­å¥ï¼Œå¹¶å°†ç»„ä»¶çš„ <code>åˆå§‹ HTML ç»“æ„</code> æ¸²æŸ“æˆä¸€ä¸ªå ä½ç¬¦</li>
<li>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒæœåŠ¡å™¨ç”Ÿæˆçš„åˆå§‹ HTML ç»“æ„åŒ…å« <code>loading ? (&lt;p&gt;åŠ è½½ä¸­...&lt;/p&gt;)</code> éƒ¨åˆ†</li>
<li>å› æ­¤ï¼Œ<code>åŠ è½½ä¸­...</code> ç­‰å†…å®¹æ˜¯åœ¨ Node.js æœåŠ¡å™¨ä¸Šç”Ÿæˆçš„ï¼Œå¹¶åŒ…å«åœ¨å‘é€ç»™æµè§ˆå™¨çš„åˆå§‹ HTML ç§</li>
</ul>
</li>
<li>å‘é€ç»™æµè§ˆå™¨ï¼šæœåŠ¡å™¨å°†æ‰€æ¸²æŸ“å‡ºæ¥çš„ HTMLï¼ˆåŒ…å« <code>SSRPage</code> çš„æ•°æ®å’Œ <code>&lt;ClientComponent&gt;</code> æ‰€å¯¹åº”çš„ <code>åŠ è½½ä¸­...</code>ï¼‰å‘é€ç»™æµè§ˆå™¨</li>
</ul>
<p><strong>é˜¶æ®µäºŒï¼šæµè§ˆå™¨æ¥ç®¡ (æ‰§è¡Œé€»è¾‘å’Œæ•°æ®è·å–)</strong></p>
<ul>
<li>æµè§ˆå™¨æ˜¾ç¤ºï¼šæµè§ˆå™¨ç«‹å³æ˜¾ç¤ºæ¥è‡ªæœåŠ¡å™¨çš„ HTMLï¼Œç”¨æˆ·çœ‹åˆ°äº†å®Œæ•´çš„ SSR æ•°æ®å’Œ <code>&lt;ClientComponent&gt;</code> ä¸­çš„ <code>åŠ è½½ä¸­...</code>ã€‚<strong>å½“ç„¶è¿™ä¸ªä¾‹å­å› ä¸ºè¯·æ±‚æ—¶é—´å¤ªçŸ­ï¼Œå¯¼è‡´çœ‹ä¸åˆ°é¡µé¢ä¸Šçš„ <code>åŠ è½½ä¸­...</code>ï¼Œå¦‚æœåœ¨ Python æœåŠ¡çš„ API å®ç°ä¸­åŠ å…¥ <code>time.sleep(10)</code>ï¼Œåˆ™å¯ä»¥è§‚å¯Ÿåˆ° <code>åŠ è½½ä¸­...</code></strong>ï¼š</li>
</ul>
<img src="/fuchencong.github.io/2026/01/08/nextjs-render-trace/images/01.jpg" class="">
<ul>
<li>
<p>Hydrationï¼ˆæ°´åˆä½œç”¨ï¼‰ï¼š<code>Next.js</code> å®¢æˆ·ç«¯ä»£ç å¼€å§‹æ°´åˆä½œç”¨ï¼Œå®ƒå‘ç° <code>&lt;ClientComponent&gt;</code> æ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯ç»„ä»¶ï¼Œäºæ˜¯å¼€å§‹æ‰§è¡Œå®ƒçš„ JavaScript é€»è¾‘</p>
<ul>
<li>Hooks å¯åŠ¨</li>
<li>useState(null) è¢«åˆå§‹åŒ–ã€‚</li>
<li>useEffect è¢«æ‰§è¡Œï¼ˆå› ä¸ºå®ƒåœ¨ç»„ä»¶æŒ‚è½½åè¿è¡Œï¼‰</li>
</ul>
</li>
<li>
<p>æµè§ˆå™¨å‘å‡º ajax è¯·æ±‚ï¼š</p>
<ul>
<li><code>useEffect</code> å†…éƒ¨çš„ <code>fetch(http://localhost:8000/api/random-number)</code> å‡½æ•°è¢«æ‰§è¡Œï¼Œè¿™ä¸ª HTTP è¯·æ±‚æ˜¯ä»ç”¨æˆ·çš„æµè§ˆå™¨ä¸­å‘å‡ºçš„</li>
<li>é€šè¿‡æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·ï¼Œæˆ‘ä»¬èƒ½çœ‹åˆ°è¿™ä¸ª ajax è¯·æ±‚</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">GET http://localhost:8000/api/random-number</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;source&quot;</span>: <span class="string">&quot;Python FastAPI Server&quot;</span>,</span><br><span class="line">    <span class="string">&quot;value&quot;</span>: 826,</span><br><span class="line">    <span class="string">&quot;timestamp&quot;</span>: <span class="string">&quot;Server Time: 2026-01-07 10:39:26 KST&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>çŠ¶æ€æ›´æ–°å’Œå®¢æˆ·ç«¯æ¸²æŸ“ (CSR)ï¼š
<ul>
<li>è¯·æ±‚å®Œæˆåï¼ŒsetData è¢«è°ƒç”¨</li>
<li><code>ClientComponent</code> åœ¨æµè§ˆå™¨ä¸­é‡æ–°æ¸²æŸ“ï¼Œç”¨çœŸå®çš„éšæœºç»“æœæ•°æ®æ›¿æ¢äº†ä¹‹å‰çš„ <code>åŠ è½½ä¸­...</code> æ–‡æœ¬</li>
</ul>
</li>
</ul>
<img src="/fuchencong.github.io/2026/01/08/nextjs-render-trace/images/02.jpg" class="">
<p>æ•´ä¸ªæµç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<img src="/fuchencong.github.io/2026/01/08/nextjs-render-trace/images/07.png" class="">
<p><strong>æ€»ç»“ä¸€ä¸‹</strong></p>
<ul>
<li>å¯¹äº <code>SSRPage</code> å†…çš„ <code>Server Component</code>ï¼šåˆå§‹ HTML åœ¨ Node.js æœåŠ¡å™¨ä¸Šè¿›è¡Œæ¸²æŸ“ï¼Œå¯¹äºå…¶ä¸­çš„åŠ¨æ€æ•°æ®ï¼Œç”± Node.js æœåŠ¡å‘ Python API æœåŠ¡å‘å‡ºè¯·æ±‚</li>
<li>å¯¹äº <code>SSRPage</code> å†…çš„ <code>ClientComponent</code>ï¼šåˆå§‹ HTML åœ¨ Node.js æœåŠ¡å™¨ä¸Šç”Ÿæˆï¼Œæ„å»ºå‡º <code>åŠ è½½ä¸­</code> HTML ç»“æ„</li>
</ul>
<p><strong>è¿™æ­ç¤ºäº† Next.js App Router çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼šæœåŠ¡å™¨ç»„ä»¶å¯ä»¥åŒ…å«å®¢æˆ·ç«¯ç»„ä»¶ï¼Œä½†å®ƒä»¬çš„æ‰§è¡Œç¯å¢ƒæ˜¯åˆ†ç¦»çš„</strong>ã€‚å¯¹äºæœåŠ¡å™¨ç»„ä»¶æ ‘ä¸­å¼•ç”¨çš„ <code>å®¢æˆ·ç«¯ç»„ä»¶</code>ï¼ŒNext.js æœåŠ¡å™¨ä¸ä¼šæ‰§è¡Œå…¶æ ¸å¿ƒä»£ç é€»è¾‘ï¼ˆä¾‹å¦‚ <code>Hooks</code> æˆ–äº‹ä»¶å¤„ç†ï¼‰ï¼š</p>
<ul>
<li>æœåŠ¡å™¨åªè´Ÿè´£å¤„ç†å…¶æ¸²æŸ“æ ‡è®°ï¼ˆå¦‚å ä½ç¬¦æˆ–åˆå§‹ HTML ç»“æ„ï¼‰</li>
<li>å°†å…¶å®¢æˆ·ç«¯ bundle çš„ JavaScript è„šæœ¬å¼•ç”¨å‘é€ç»™æµè§ˆå™¨</li>
<li>å®¢æˆ·ç«¯ç»„ä»¶çš„å®é™…ä»£ç æ‰§è¡Œï¼ˆå¦‚çŠ¶æ€ç®¡ç†å’Œäº¤äº’é€»è¾‘ï¼‰å®Œå…¨åœ¨æµè§ˆå™¨ä¸­è¿›è¡Œ</li>
</ul>
<h2 id="è®¿é—®-csr-page"><a class="markdownIt-Anchor" href="#è®¿é—®-csr-page"></a> è®¿é—® <code>csr-page</code></h2>
<p>åœ¨æµè§ˆå™¨ä¸­è®¿é—® <code>http://10.9.33.133:3002/ssr-page</code>ï¼š</p>
<ul>
<li>Next æœåŠ¡æ—¥å¿—</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /csr-page 200 <span class="keyword">in</span> 28ms (compile: 2ms, render: 26ms)</span><br></pre></td></tr></table></figure>
<ul>
<li>Python æœåŠ¡æ—¥å¿—</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INFO:     127.0.0.1:33338 - &quot;GET /api/random-number HTTP/1.1&quot; 200 OK</span><br></pre></td></tr></table></figure>
<ul>
<li>åœ¨ Chrome çš„å¼€å‘æ”»å‡»ä¸­ï¼Œå¯ä»¥çœ‹åˆ° SSR é¡µé¢çš„è¿”å›ç»“æœ</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">......</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;padding:20px;border:1px solid green&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>CSR é¡µé¢ (å®¢æˆ·ç«¯æ¸²æŸ“)<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">strong</span>&gt;</span>æ•°æ®æµï¼š<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">        æµè§ˆå™¨åœ¨ç»„ä»¶åŠ è½½å **å¼‚æ­¥** è°ƒç”¨ Python APIã€‚</span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-top:20px;border-top:1px dashed #ccc;padding-top:10px&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>å®¢æˆ·ç«¯ç»„ä»¶</span><br><span class="line">        <span class="comment">&lt;!-- --&gt;</span></span><br><span class="line">        è·å–æ•°æ®:<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>åŠ è½½ä¸­...<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<img src="/fuchencong.github.io/2026/01/08/nextjs-render-trace/images/03.jpg" class="">
<ul>
<li>é¡µé¢åŠ è½½å®Œæˆåï¼Œå®¢æˆ·ç«¯ <code>ClientComponent</code> ç»„ä»¶æ‰ä¼šä»æµè§ˆå™¨å‘å‡º ajax æ•°æ®è¯·æ±‚</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">GET http://localhost:8000/api/random-number</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;source&quot;</span>: <span class="string">&quot;Python FastAPI Server&quot;</span>,</span><br><span class="line">    <span class="string">&quot;value&quot;</span>: 420,</span><br><span class="line">    <span class="string">&quot;timestamp&quot;</span>: <span class="string">&quot;Server Time: 2026-01-07 10:39:26 KST&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ”¶åˆ° ajax çš„åº”ç­”åï¼Œé¡µé¢ä¸Š <code>åŠ è½½ä¸­...</code> æ–‡æœ¬è¢«æ›¿æ¢ä¸ºçœŸå®æ•°æ®ï¼Œæ¸²æŸ“å‡ºæœ€ç»ˆçš„é¡µé¢ç»“æœ</li>
</ul>
<img src="/fuchencong.github.io/2026/01/08/nextjs-render-trace/images/04.jpg" class="">
<ul>
<li>è€Œä¸”æ¯æ¬¡åˆ·æ–°é¡µé¢æ—¶ï¼Œè¿”å›çš„åˆå§‹ HTML éƒ½æ˜¯ç›¸åŒçš„ï¼ˆ<code>åŠ è½½ä¸­...</code>ï¼‰ã€‚å½“é¡µé¢åœ¨æµè§ˆå™¨åŠ è½½å®Œæˆåï¼Œå®¢æˆ·ç«¯ç»„ä»¶æ‰ä¼šä»æµè§ˆå™¨å‘å‡º ajax è¯·æ±‚ï¼Œä¹‹åæ‰ä¼šçœ‹åˆ°ä¸åŒçš„éšæœºæ•°ç»“æœ</li>
</ul>
<p>æ•´ä¸ªæµç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<img src="/fuchencong.github.io/2026/01/08/nextjs-render-trace/images/08.png" class="">
<h2 id="ä¸€ä¸ªæœ‰æ„æ€çš„é—®é¢˜"><a class="markdownIt-Anchor" href="#ä¸€ä¸ªæœ‰æ„æ€çš„é—®é¢˜"></a> ä¸€ä¸ªæœ‰æ„æ€çš„é—®é¢˜</h2>
<p>æˆ‘è§‚å¯Ÿåˆ°ä¸€ä¸ªå¾ˆæœ‰è¶£çš„ç°è±¡ã€‚æˆ‘çš„ web åº”ç”¨çš„æ˜¯åœ¨æœåŠ¡å™¨ <code>10.9.33.133</code> ä¸Šè¿è¡Œçš„çš„ï¼Œè€Œå½“ <code>ClientComponent </code> åœ¨ Mac ä¸Šçš„æµè§ˆå™¨æ¸²æŸ“åï¼Œæ˜¯å¾€ <code>http://localhost:8000/</code> fetch æ•°æ®çš„ï¼Œé‚£æ­¤æ—¶ <code>localhost</code> æŒ‡æˆ‘çš„æœ¬åœ° Macï¼Œé‚£åº”è¯¥æ˜¯å¾€æˆ‘çš„æœ¬åœ° Mac ä¸Šçš„ 8000 ç«¯å£è¯·æ±‚æ•°æ®ï¼Œä¸ºå•¥ <code>10.9.33.133:8000</code> åè€Œæ”¶åˆ°è¯·æ±‚äº†å‘¢ï¼Ÿè¿™ä¸ªç¤ºä¾‹ä¸ºå•¥èƒ½è¿è¡ŒæˆåŠŸï¼Ÿ</p>
<p>æˆ‘ä¹Ÿæ’æŸ¥äº†å¾ˆä¹…ï¼Œå‘ç°æˆ‘çš„ç¤ºä¾‹é¡¹ç›®æ˜¯é€šè¿‡ <code>VSCode Remote-SSH</code> å¼€å‘çš„ï¼Œè€Œ VSCode ä¼¼ä¹ä¼šè‡ªåŠ¨å»ºç«‹å¯¹åº”çš„ SSH éš§é“æ¥å®Œæˆç›¸å…³ç«¯å£çš„è½¬å‘ï¼ˆé€šè¿‡ VSCode çš„ <code>Ports: Focus on Ports View</code> å‘½ä»¤å¯ä»¥æŸ¥çœ‹å½“å‰ç«¯å£è½¬å‘ï¼‰ï¼Œå› æ­¤æœºç¼˜å·§åˆåœ°ä½¿ä¸Šè¿°ä¾‹å­èƒ½æˆåŠŸè¿è¡Œã€‚</p>
<img src="/fuchencong.github.io/2026/01/08/nextjs-render-trace/images/05.jpg" class="">
<p>å¦‚æœå…³é—­ vscodeï¼Œæœç„¶å‡ºç°é”™è¯¯ï¼š</p>
<img src="/fuchencong.github.io/2026/01/08/nextjs-render-trace/images/06.jpg" class="">
<p>å½“ç„¶åœ¨çœŸæ­£çš„é¡¹ç›®å¼€å‘ä¸­ï¼Œæ¨èä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œè¿™æ ·æµè§ˆå™¨è‡ªåŠ¨ä½¿ç”¨å½“å‰åŸŸåå‘é€ HTTP è¯·æ±‚ã€‚æœåŠ¡ç«¯é€šè¿‡ Nginx ç­‰åå‘ä»£ç†è½¯ä»¶å°† API è¯·æ±‚è½¬å‘åˆ° Python æœåŠ¡ä¸Šï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name my-app.com;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è§„åˆ™ 1: ä»£ç† Next.js åº”ç”¨çš„æ‰€æœ‰é API è¯·æ±‚</span></span><br><span class="line">    <span class="comment"># ä»»ä½•ä¸ä»¥ /api å¼€å¤´çš„è¯·æ±‚ï¼Œéƒ½è½¬å‘ç»™ Next.js æ¸²æŸ“é¡µé¢</span></span><br><span class="line">    location / &#123;</span><br><span class="line">        proxy_pass http://localhost:3000;</span><br><span class="line">        proxy_http_version 1.1;</span><br><span class="line">        proxy_set_header Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">        proxy_set_header Connection <span class="string">&#x27;upgrade&#x27;</span>;</span><br><span class="line">        proxy_set_header Host <span class="variable">$host</span>;</span><br><span class="line">        proxy_cache_bypass <span class="variable">$http_upgrade</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è§„åˆ™ 2: ä»£ç† API è¯·æ±‚åˆ° Python æœåŠ¡</span></span><br><span class="line">    <span class="comment"># ä»»ä½•ä»¥ /api å¼€å¤´çš„è¯·æ±‚ï¼Œéƒ½è½¬å‘ç»™ Python FastAPI å¤„ç†</span></span><br><span class="line">    location /api/ &#123;</span><br><span class="line">        <span class="comment"># è½¬å‘åˆ° Python æœåŠ¡çš„å†…éƒ¨åœ°å€å’Œç«¯å£</span></span><br><span class="line">        proxy_pass http://localhost:8000;</span><br><span class="line">        proxy_set_header Host <span class="variable">$host</span>;</span><br><span class="line">        proxy_set_header X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">        proxy_set_header X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å¯¹æ¯”çº¯-react-åº”ç”¨"><a class="markdownIt-Anchor" href="#å¯¹æ¯”çº¯-react-åº”ç”¨"></a> å¯¹æ¯”çº¯ React åº”ç”¨</h2>
<p>å¯¹äºçº¯ <code>å®¢æˆ·ç«¯æ¸²æŸ“</code>ï¼ˆClient-Side Renderingï¼ŒCSRï¼‰æ¡†æ¶ï¼Œå¦‚ä¼ ç»Ÿçš„ React åº”ç”¨ï¼Œæµè§ˆå™¨æ¥æ”¶åˆ°çš„åˆå§‹ HTML é¡µé¢å†…å®¹éå¸¸å°‘ï¼Œä¸»è¦ä¾é  JavaScript ä»£ç æ¥å®Œæˆåç»­çš„é¡µé¢æ„å»ºå’Œæ¸²æŸ“ã€‚å¯¹äºä¸€ä¸ªå…¸å‹çš„çº¯ React åº”ç”¨ï¼Œåœ¨é¦–æ¬¡è®¿é—®æ—¶ï¼ŒæœåŠ¡å™¨è¿”å›çš„ HTML æ–‡ä»¶ï¼ˆé€šå¸¸æ˜¯ index.htmlï¼‰éå¸¸ç²¾ç®€ï¼Œå®ƒä¸»è¦åŒ…å«ä»¥ä¸‹ä¸‰ä¸ªæ ¸å¿ƒå…ƒç´ ï¼š</p>
<ul>
<li>éª¨æ¶å’Œå…ƒæ•°æ®ï¼ˆ<code>&lt;head&gt;</code> éƒ¨åˆ†ï¼‰ï¼šè¿™éƒ¨åˆ†åŒ…å«äº†æµè§ˆå™¨æ‰€éœ€çš„åŸºæœ¬ä¿¡æ¯ï¼Œä½†æ²¡æœ‰å®é™…çš„é¡µé¢å†…å®¹ã€‚</li>
<li>æ ¹æŒ‚è½½ç‚¹ï¼ˆRoot Mount Pointï¼‰ï¼šè¿™æ˜¯æ•´ä¸ª CSR æ¨¡å¼ä¸­æœ€å…³é”®çš„å…ƒç´ ï¼Œå®ƒé€šå¸¸æ˜¯ä¸€ä¸ªç©ºçš„ <div> æ ‡ç­¾ï¼Œåé¢ React ä¼šå°†æ‰€æœ‰ç»„ä»¶ã€UI å…ƒç´ ã€æ•°æ®å’Œé€»è¾‘éƒ½æ³¨å…¥åˆ°è¿™ä¸ª <code>&lt;div&gt;</code> å†…éƒ¨</li>
<li>JavaScript Bundle å¼•ç”¨ï¼ˆ<code>&lt;script&gt;</code> æ ‡ç­¾ï¼‰ï¼šè¿™æ˜¯é¡µé¢çš„ <code>å¤§è„‘</code>ï¼Œæµè§ˆå™¨å¿…é¡»ä¸‹è½½ã€è§£æå¹¶æ‰§è¡Œè¿™äº› JavaScript æ–‡ä»¶ï¼Œç„¶åæ‰èƒ½çœ‹åˆ°é¡µé¢å†…å®¹</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/static/js/bundle.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ•´ä¸ªè¯·æ±‚è¿‡ç¨‹å¤§è‡´å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<ul>
<li>æµè§ˆå™¨è¯·æ±‚ï¼šæµè§ˆå™¨å‘æœåŠ¡å™¨è¯·æ±‚ <code>/</code> è·¯å¾„</li>
<li>æœåŠ¡å™¨å“åº”ï¼šæœåŠ¡å™¨è¿”å›ä¸Šè¿°åŒ…å«ç©º <code>&lt;div id=&quot;root&quot;&gt;</code> å’Œ <code>&lt;script&gt;</code> æ ‡ç­¾çš„ <code>æç®€ HTML æ–‡ä»¶</code></li>
<li>ä¸‹è½½ JSï¼šæµè§ˆå™¨è§£æ HTMLï¼Œå‘ç° <code>&lt;script&gt;</code> æ ‡ç­¾ï¼Œå¼€å§‹ä¸‹è½½å¤§å‹çš„ <code>JavaScript Bundle</code>ï¼ˆå³æ•´ä¸ª React åº”ç”¨çš„ä»£ç ï¼‰</li>
<li>æ‰§è¡Œ JSï¼ˆæ¸²æŸ“å¼€å§‹ï¼‰ï¼šJS ä¸‹è½½å®Œæˆåï¼Œæµè§ˆå™¨å¼€å§‹æ‰§è¡Œä»£ç 
<ul>
<li>React è¿è¡Œæ—¶å¯åŠ¨</li>
<li>ä»£ç æ‰¾åˆ° HTML ä¸­çš„ <code>&lt;div id=&quot;root&quot;&gt;</code> å…ƒç´ </li>
<li>React è°ƒç”¨ï¼š<code>ReactDOM.createRoot(document.getElementById('root')).render(...)</code></li>
</ul>
</li>
<li>æ„å»ºå’Œæ³¨å…¥ DOMï¼šReact å¼€å§‹æ‰§è¡Œç»„ä»¶é€»è¾‘ï¼Œæ ¹æ®ç»„ä»¶çš„ State å’Œ Propsï¼Œåœ¨å†…å­˜ä¸­æ„å»ºè™šæ‹Ÿ DOM (Virtual DOM)</li>
<li>æ˜¾ç¤ºå†…å®¹ï¼šReact å°†è™šæ‹Ÿ DOM è½¬åŒ–ä¸ºçœŸå®çš„ DOM èŠ‚ç‚¹ï¼Œå¹¶æ³¨å…¥åˆ° <code>&lt;div id=&quot;root&quot;&gt;</code> ä¸­ã€‚æ­¤æ—¶ï¼Œç”¨æˆ·æ‰çœ‹åˆ°é¡µé¢å†…å®¹</li>
<li>æ•°æ®è·å–ï¼šå¦‚æœç»„ä»¶éœ€è¦æ•°æ®ï¼ˆå¦‚é€šè¿‡ <code>useEffect</code>ï¼‰ï¼Œè¿™äº›æ•°æ®è¯·æ±‚æ˜¯åœ¨ JS æ‰§è¡Œæ—¶ã€ä»æµè§ˆå™¨ä¸­å¼‚æ­¥å‘å‡ºçš„ã€‚æ•°æ®è¿”å›åï¼Œç»„ä»¶æ›´æ–°ï¼ŒUI åˆ·æ–°</li>
</ul>
<p>è¿™ä¸ªåˆå§‹çš„æç®€ HTML é¡µé¢æ˜¯åœ¨å‰ç«¯åº”ç”¨æ„å»ºæ—¶ç”Ÿæˆçš„ï¼š</p>
<ul>
<li>é€šè¿‡ <code>Webpack</code>ã€<code>Vite</code> ç­‰æ„å»ºå·¥å…·ç”Ÿæˆåˆå§‹çš„ <code>index.html</code> æ–‡ä»¶ï¼Œå¹¶æ‰“åŒ…å¥½æ‰€æœ‰é™æ€èµ„æº</li>
<li>å°†è¿™äº›é™æ€æ–‡ä»¶éƒ¨ç½²åˆ°ç”Ÿäº§ç›®å½•ä¸­</li>
<li>é€šè¿‡ Nginx ç­‰ Web æœåŠ¡å™¨æ‰˜ç®¡è¿™äº›é™æ€æ–‡ä»¶ï¼Œå¯¹å¤–æä¾›å“åº”</li>
</ul>
<p>å› æ­¤åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œçº¯ React åº”ç”¨é€šå¸¸ä¸éœ€è¦ä¸€ä¸ªä¸“é—¨çš„ <code>Node.js</code> æœåŠ¡å™¨ã€‚çº¯ React åº”ç”¨ç”Ÿæˆçš„ build æ–‡ä»¶å¤¹å†…ï¼Œæ‰€æœ‰å†…å®¹éƒ½æ˜¯é™æ€èµ„æºï¼Œå¯ä»¥ä½¿ç”¨ä»»ä½•é«˜æ€§èƒ½çš„é™æ€æ–‡ä»¶æœåŠ¡å™¨æ¥æ‰˜ç®¡å®ƒä»¬ã€‚å¼€å‘ç¯å¢ƒå¯èƒ½ä¼šä½¿ç”¨ <code>Node.js</code> æ¥ä½œä¸ºå¼€å‘æœåŠ¡å™¨ï¼Œä¸»è¦ç›®çš„æ˜¯æä¾›çƒ­æ¨¡å—æ›¿æ¢ (HMR)ã€ä»£ç å®æ—¶ç¼–è¯‘ç­‰æ–¹ä¾¿å¼€å‘çš„åŠŸèƒ½ã€‚</p>
<p>è€Œå¯¹äº Next.js çš„ SSRï¼ˆæœåŠ¡ç«¯æ¸²æŸ“ï¼‰åŠŸèƒ½è€Œè¨€ï¼ŒNode.js åˆ™æ˜¯å¿…è¦çš„ï¼Œå› ä¸ºå®ƒæä¾›äº† JS çš„ <code>è¿è¡Œæ—¶ç¯å¢ƒ</code>ï¼Œè®© React/Next/åº”ç”¨ç¨‹åºä»£ç èƒ½åœ¨æœåŠ¡ç«¯è¿è¡Œï¼Œå¹¶åŠ¨æ€æ¸²æŸ“å‡ºæ‰€éœ€è¦è¿”å›çš„ HTML é¡µé¢ã€‚</p>
<h2 id="å°ç»“"><a class="markdownIt-Anchor" href="#å°ç»“"></a> å°ç»“</h2>
<p>æœ¬æ–‡é€šè¿‡ä¸€ä¸ªå®é™…ä¾‹å­ï¼Œè·Ÿè¸ªäº† Next.js æ¡†æ¶ä¸‹çš„ CSRï¼ˆå®¢æˆ·ç«¯æ¸²æŸ“ï¼‰å’Œ SSRï¼ˆæœåŠ¡ç«¯æ¸²æŸ“ï¼‰çš„äº¤äº’è¿‡ç¨‹ï¼Œä»è€ŒåŠ æ·±å¯¹ CSR å’Œç°ä»£ SSR æŠ€æœ¯çš„ç†è§£ã€‚</p>
<h2 id="reference"><a class="markdownIt-Anchor" href="#reference"></a> Reference</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://juejin.cn/post/7400325741441204261">SSRã€Hydration å’Œ åŒæ„</a></li>
</ul>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/fuchencong.github.io/tags/%E5%89%8D%E7%AB%AF/" rel="tag"># å‰ç«¯</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item"></div>
      <div class="post-nav-item">
    <a href="/fuchencong.github.io/2026/01/05/python-httpx-oauth/" rel="next" title="python httpx-oauth æºç åˆ†æ">
      python httpx-oauth æºç åˆ†æ <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="nav-number">1.</span> <span class="nav-text"> é¡¹ç›®ç»“æ„</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="nav-number">1.1.</span> <span class="nav-text"> åˆ›å»ºé¡¹ç›®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#appssr-pagepagetsx"><span class="nav-number">1.2.</span> <span class="nav-text"> app&#x2F;ssr-page&#x2F;page.tsx</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#appcsr-pagepagetsx"><span class="nav-number">1.3.</span> <span class="nav-text"> app&#x2F;csr-page&#x2F;page.tsx</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#appcsr-pageclient-componenttsx"><span class="nav-number">1.4.</span> <span class="nav-text"> app&#x2F;csr-page&#x2F;client-component.tsx</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#python-api-%E6%9C%8D%E5%8A%A1"><span class="nav-number">1.5.</span> <span class="nav-text"> python API æœåŠ¡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1"><span class="nav-number">1.6.</span> <span class="nav-text"> å¯åŠ¨æœåŠ¡</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BF%E9%97%AE-ssr-page"><span class="nav-number">2.</span> <span class="nav-text"> è®¿é—® ssr-page</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%8E%B0%E8%B1%A1"><span class="nav-number">2.1.</span> <span class="nav-text"> ç°è±¡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%93%E6%9E%9C%E5%88%86%E6%9E%90"><span class="nav-number">2.2.</span> <span class="nav-text"> ç»“æœåˆ†æ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BF%E9%97%AE-csr-page"><span class="nav-number">3.</span> <span class="nav-text"> è®¿é—® csr-page</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E4%B8%AA%E6%9C%89%E6%84%8F%E6%80%9D%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-number">4.</span> <span class="nav-text"> ä¸€ä¸ªæœ‰æ„æ€çš„é—®é¢˜</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AF%B9%E6%AF%94%E7%BA%AF-react-%E5%BA%94%E7%94%A8"><span class="nav-number">5.</span> <span class="nav-text"> å¯¹æ¯”çº¯ React åº”ç”¨</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B0%8F%E7%BB%93"><span class="nav-number">6.</span> <span class="nav-text"> å°ç»“</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#reference"><span class="nav-number">7.</span> <span class="nav-text"> Reference</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="fuchencong"
      src="/fuchencong.github.io/images/logo.jpeg">
  <p class="site-author-name" itemprop="name">fuchencong</p>
  <div class="site-description" itemprop="description">Having dreams is what makes life tolerable.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/fuchencong.github.io/archives/">
        
          <span class="site-state-item-count">227</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/fuchencong.github.io/categories/">
          
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/fuchencong.github.io/tags/">
          
        <span class="site-state-item-count">34</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/fuchencong" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;fuchencong" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:fuchencong@163.com" title="E-Mail â†’ mailto:fuchencong@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2026</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">fuchencong</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> å¼ºåŠ›é©±åŠ¨
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/fuchencong.github.io/lib/anime.min.js"></script>
  <script src="/fuchencong.github.io/lib/velocity/velocity.min.js"></script>
  <script src="/fuchencong.github.io/lib/velocity/velocity.ui.min.js"></script>

<script src="/fuchencong.github.io/js/utils.js"></script>

<script src="/fuchencong.github.io/js/motion.js"></script>


<script src="/fuchencong.github.io/js/schemes/muse.js"></script>


<script src="/fuchencong.github.io/js/next-boot.js"></script>




  















  

  
      
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex@0/dist/katex.min.css">


  

</body>
</html>
